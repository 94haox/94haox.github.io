<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.wutao.xyz</id>
    <title>Gridea</title>
    <updated>2020-03-18T01:57:57.866Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://blog.wutao.xyz"/>
    <link rel="self" href="https://blog.wutao.xyz/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://blog.wutao.xyz/images/avatar.png</logo>
    <icon>https://blog.wutao.xyz/favicon.ico</icon>
    <rights>All rights reserved 2020, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[å†™åœ¨ FunnyFM ä¸Šçº¿ä¸¤ä¸ªæœˆå]]></title>
        <id>https://blog.wutao.xyz/post/xie-zai-funnyfm-shang-xian-liang-ge-yue-hou/</id>
        <link href="https://blog.wutao.xyz/post/xie-zai-funnyfm-shang-xian-liang-ge-yue-hou/">
        </link>
        <updated>2019-10-11T07:51:59.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="å†™åœ¨-funnyfm-ä¸Šçº¿ä¸¤ä¸ªæœˆå">å†™åœ¨ FunnyFM ä¸Šçº¿ä¸¤ä¸ªæœˆå</h1>
<p>FunnyFM æ˜¯ä¸€æ¬¾å®ç”¨çš„ Podcast å®¢æˆ·ç«¯ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="å†™åœ¨-funnyfm-ä¸Šçº¿ä¸¤ä¸ªæœˆå">å†™åœ¨ FunnyFM ä¸Šçº¿ä¸¤ä¸ªæœˆå</h1>
<p>FunnyFM æ˜¯ä¸€æ¬¾å®ç”¨çš„ Podcast å®¢æˆ·ç«¯ã€‚</p>
<!-- more -->
<p>å®ƒè¢«æˆ‘ç«‹é¡¹çš„åŸå› æ˜¯ iOS è‡ªå¸¦çš„ Podcast å®¢æˆ·ç«¯åœ¨æ·»åŠ å¤šä¸ªæ³›ç”¨å‹ RSS æ’­å®¢åä¼šéå¸¸çš„å¡é¡¿ï¼Œåœ¨æˆ‘çš„ä¸»åŠ›æœº iPhoneX ä¸Šå¿…ç°å¡æ­»ã€‚æ‰€ä»¥æˆ‘èŒå‘äº†è‡ªå·±åšä¸€æ¬¾å¥½ç”¨ï¼Œæµç•…çš„ Podcast å®¢æˆ·ç«¯ã€‚</p>
<h2 id="å¼€å‘å‘¨æœŸ">å¼€å‘å‘¨æœŸ</h2>
<p>FunnyFM ä»“åº“çš„åˆ›å»ºæ˜¯åœ¨ 18å¹´çš„11æœˆ9å·ï¼Œæ­£å¼ä¸Šçº¿æ—¶é—´æ˜¯åœ¨19å¹´çš„8æœˆ14å·ã€‚æ—¶é—´è·¨åº¦éå¸¸çš„é•¿ã€‚<br>
ä¸»è¦åŸå› æœ‰å‡ ä¸ªï¼š<br>
1ã€åˆæœŸæ²¡æœ‰ä¸Šçº¿è®¡åˆ’ï¼Œçº¯ç²¹è‡ªå¨±è‡ªä¹ï¼›<br>
2ã€æœ‰ä¸Šçº¿è®¡åˆ’åï¼ŒåŠŸèƒ½è¿‡äºç®€å•ï¼ŒUIè¿‡äºç®€é™‹ï¼Œæ²¡æœ‰ä¸Šçº¿æ¬²æœ›ï¼›<br>
3ã€UI åŸºæœ¬é è‡ªå·±ç”»ï¼›<br>
4ã€å°† rss çš„è§£æç”±æœ¬åœ°è¿ç§»åˆ°æœåŠ¡ç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªå·±æ‰¿æ‹…äº†äº§å“ï¼ŒUIï¼Œåç«¯ï¼ŒiOSå¼€å‘è¿™4ä¸ªè§’è‰²ï¼›<br>
5ã€æœŸé—´ç”±äºå…¬å¸æœ‰ä¸ªå¤§çš„éœ€æ±‚ï¼Œå¼€å‘æ—¶é—´è¾ƒå°‘ã€‚</p>
<h2 id="æŠ€æœ¯é€‰å‹">æŠ€æœ¯é€‰å‹</h2>
<h4 id="app-ç«¯">App ç«¯</h4>
<p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼ŒåŸºäºå­¦ä¹ çš„åŸå› ï¼Œé€‰æ‹©ä½¿ç”¨äº† Swiftï¼Œ æœ¬èº«æ²¡æœ‰ä¸Šçº¿ Android å¹³å°çš„è®¡åˆ’ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰è€ƒè™‘æ··åˆå¼€å‘ï¼Œè™½ç„¶ flutter å¾ˆğŸ”¥ã€‚</p>
<h4 id="åç«¯">åç«¯</h4>
<p>è¿™ä¸ªä¹Ÿæ²¡å•¥å¯è¯´çš„ï¼Œä¸»è¦å†³å®šç”¨ node.js,  é€‰å‹ä¸»è¦æ˜¯åœ¨å‡ ä¸ªæ¡†æ¶ä¸­é€‰æ‹©ã€‚ç»è¿‡æ¯”è¾ƒåï¼Œegg.js æˆä¸ºæˆ‘çš„é€‰æ‹©ï¼ŒåŸå› ä¸»è¦æ˜¯é˜¿é‡Œå¼€æºï¼Œåœ¨é˜¿é‡Œå†…éƒ¨æœ‰ä½¿ç”¨ï¼Œæ’ä»¶è¾ƒå¤šï¼Œåœ¨å›½å†…ä½¿ç”¨è€…æ¯”è¾ƒå¤šã€‚</p>
<h4 id="å‰ç«¯">å‰ç«¯</h4>
<p>æˆ‘çˆ± Vueã€‚</p>
<h4 id="è®¾è®¡å·¥å…·">è®¾è®¡å·¥å…·</h4>
<p>Sketch ï¼Œ &quot;çµæ„Ÿ&quot;æ¥æº Dribbble ğŸ˜‚ã€‚</p>
<h4 id="é‡åˆ°çš„å›°éš¾">é‡åˆ°çš„å›°éš¾</h4>
<p>1ã€éœ€æ±‚å˜åŠ¨<br>
ç”±äºåˆæœŸå¹¶æ²¡æœ‰è¯¦ç»†çš„è§„åˆ’ï¼Œæ‰€ä»¥éœ€æ±‚å˜åŠ¨è¾ƒå¿«ï¼Œä¹Ÿæ¯”è¾ƒå¤§ï¼Œæ€»æƒ³åšä¸€ä¸ªæˆç†Ÿçš„ç‰ˆæœ¬ä¸€æ¬¡æ€§ä¸Šæ¶ã€‚</p>
<p>2ã€è®¾è®¡å˜åŠ¨<br>
æœ¬èº«å¹¶ä¸ä¸“ä¸šï¼Œåªèƒ½åœ¨æ²¡æœ‰ç‰ˆæƒçš„ä½œå“ä¸­è¿›è¡Œéƒ¨åˆ†è°ƒæ•´ã€‚å¤šä¸ªæ¨¡å—æœ‰å¤šæ¬¡ UI å˜åŠ¨ã€‚</p>
<p>3ã€æœåŠ¡ç«¯<br>
èµ·åˆçš„è®¾æƒ³åªæ˜¯æœ‰ä¸€ä¸ªè´¦æˆ·ç³»ç»Ÿï¼Œç”¨æ¥åŒæ­¥ä¸åŒè®¾å¤‡ä¸­çš„è®¢é˜…åŠŸèƒ½ã€‚åç»­åˆæ·»åŠ äº†æ¨é€æœåŠ¡ï¼Œæ¨é€æœåŠ¡åˆç‰µæ‰¯åˆ° RSS çš„æŠ“å–å’Œåˆ¤åˆ«ï¼Œåœ¨åŠ ä¸Šæœ€è¿‘è®¡åˆ’çš„è®¢é˜…æœåŠ¡ï¼Œè¿˜æœ‰æƒé™é—®é¢˜ã€‚</p>
<p>4ã€ç§»åŠ¨ç«¯<br>
ç›®å‰åœ¨åšçš„åˆ†äº«é¡µï¼Œéœ€è¦æ·»åŠ æ¥å£ï¼Œä¹Ÿå¢åŠ äº†å·¥ä½œé‡ã€‚</p>
<p>5ã€å®£ä¼ <br>
å®Œå…¨æ²¡æœ‰åšï¼Œåªåœ¨ V2EX å‘äº†ä¸€ä¸ªè´´ğŸ˜‚ã€‚</p>
<h4 id="åæœŸè®¡åˆ’">åæœŸè®¡åˆ’</h4>
<p>ç›®å‰å·²ç»æ›´æ–° 9 ä¸ªç‰ˆæœ¬ï¼Œä¸¤ä¸ªæœˆå†…ï¼Œå¹³å‡ä¸€å‘¨ä¸€ä¸ªç‰ˆæœ¬ï¼Œæœ‰æ—¶å€™æ›´çŸ­ï¼Œä¸»è¦æ˜¯ç”±äºç¼ºä¹æµ‹è¯•ï¼Œåœ¨æ”¶åˆ°å´©æºƒæŠ¥å‘Šæ—¶ï¼Œéœ€è¦å¿«é€Ÿè§£å†³å’Œä¸Šæ¶ğŸ’”ã€‚</p>
<p>ç›®å‰æ˜¯ä¹°æ–­åˆ¶ï¼Œæ­£åœ¨è®¡åˆ’è½¬ä¸ºè®¢é˜…åˆ¶ã€‚</p>
<p>æ­£åœ¨è¿›è¡Œçš„å’Œåç»­çš„è®¡åˆ’æœ‰ï¼š</p>
<p>åˆ†äº«åŠŸèƒ½ï¼Œåˆ†äº«é¡µã€‚<br>
å®˜æ–¹é€šçŸ¥ç³»ç»Ÿã€‚<br>
è®¢é˜…ç³»ç»Ÿå’Œè´¦å·ç³»ç»Ÿå…³è”ã€‚<br>
ç”¨æˆ·ç­‰çº§çš„åˆ’åˆ†ã€‚<br>
æ³›ç”¨å‹æ’­å®¢æºçš„è‡ªä¸»æ·»åŠ ã€‚<br>
æ·»åŠ æ¨é€é¡µã€‚</p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« æ¥è®°å½• FunnyFM çš„å‰ä¸–ä»Šç”Ÿï¼Œä¹Ÿè®°å½•ä¸€ä¸‹å…¨æ ˆå¼€å‘çš„è‰°è¾›ï¼Œç‹¬ç«‹å¼€å‘è€…æ˜¯çœŸçš„è¾›è‹¦ï¼</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸€äº›æå‡ç”¨æˆ·ä½“éªŒçš„ iOS åŸç”ŸéŸ³è§†é¢‘ç‰¹æ€§]]></title>
        <id>https://blog.wutao.xyz/post/yi-xie-ti-sheng-yong-hu-ti-yan-de-ios-yuan-sheng-yin-shi-pin-te-xing/</id>
        <link href="https://blog.wutao.xyz/post/yi-xie-ti-sheng-yong-hu-ti-yan-de-ios-yuan-sheng-yin-shi-pin-te-xing/">
        </link>
        <updated>2019-08-18T11:43:38.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æœ€è¿‘åœ¨ä¸ºè‡ªå·±å¼€å‘ä¸€æ¬¾æ³›ç”¨å‹æ’­å®¢å·¥å…· FunnyFmï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°äº†è®¸å¤šç»†èŠ‚æ€§çš„åŠŸèƒ½ç‚¹ï¼Œä¸€äº›éœ€è¦è‡ªå·±å®ç°ï¼Œä¸€äº› iOS åŸç”Ÿæä¾›å®ç°ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>æœ€è¿‘åœ¨ä¸ºè‡ªå·±å¼€å‘ä¸€æ¬¾æ³›ç”¨å‹æ’­å®¢å·¥å…· FunnyFmï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å‘ç°äº†è®¸å¤šç»†èŠ‚æ€§çš„åŠŸèƒ½ç‚¹ï¼Œä¸€äº›éœ€è¦è‡ªå·±å®ç°ï¼Œä¸€äº› iOS åŸç”Ÿæä¾›å®ç°ã€‚</p>
 <!-- more --> 
<p>ä»¥ä¸‹æ˜¯åœ¨å¼€å‘è€…æ–‡æ¡£ä¸­å‘ç°çš„ä¸€äº›ç”¨å¾—ç€çš„åŸç”Ÿç‰¹æ€§ã€‚</p>
<h3 id="ç« èŠ‚åŠŸèƒ½">ç« èŠ‚åŠŸèƒ½</h3>
<p>å¤§å¤šæ•°çš„æ’­å®¢å·¥å…·ä¸­ï¼Œå¦‚æœéŸ³é¢‘æºæä¾› <code>Chapter</code>ï¼Œ é‚£ä¹ˆä½ å¯ä»¥é€šè¿‡è¯»å–å…ƒæ•°æ®ä¸­çš„ç« èŠ‚ä¿¡æ¯æ¥è‡ªå®šä¹‰ç« èŠ‚é€‰æ‹©ç•Œé¢ã€‚</p>
<pre><code class="language-swift">let asset = AVAsset(url: &lt;# Asset URL #&gt;)
let chapterLocalesKey = &quot;availableChapterLocales&quot;
 
asset.loadValuesAsynchronously(forKeys: [chapterLocalesKey]) {
    var error: NSError?
    let status = asset.statusOfValue(forKey: chapterLocalesKey, error: &amp;error)
    if status == .loaded {
        let languages = Locale.preferredLanguages
        let chapterMetadata = asset.chapterMetadataGroups(bestMatchingPreferredLanguages: languages)
        // Process chapter metadata
    }
    else {
        // Handle other status cases
    }
}
</code></pre>
<p>å’Œ</p>
<pre><code class="language-swift">func convertTimedMetadataGroupsToChapters(groups: [AVTimedMetadataGroup]) -&gt; [Chapter] {
    return groups.map { group -&gt; Chapter in
        // Retrieve AVMetadataCommonIdentifierTitle metadata items
        let titleItems = AVMetadataItem.metadataItems(from: group.items, filteredByIdentifier: AVMetadataCommonIdentifierTitle)
 
        // Retrieve AVMetadataCommonIdentifierTitle metadata items
        let artworkItems = AVMetadataItem.metadataItems(from: group.items, filteredByIdentifier: AVMetadataCommonIdentifierArtwork)

        var title = &quot;Default Title&quot;
        var image = UIImage(named: &quot;placeholder&quot;)!

        if let titleValue = titleItems.first?.stringValue {
            title = titleValue
        }

        if let imgData = artworkItems.first?.dataValue, imageValue = UIImage(data: imgData) {
            image = imageValue
        }

        return Chapter(time: group.timeRange.start, title: title, image: image)
    }
}
</code></pre>
<h3 id="åª’ä½“é€‰é¡¹">åª’ä½“é€‰é¡¹</h3>
<p>AVKitå’ŒAVFoundationæä¾›äº†å‘ˆç°å­—å¹•å’Œéšè—å¼å­—å¹•ä»¥åŠé€‰æ‹©å…¶ä»–éŸ³é¢‘å’Œè§†é¢‘è½¨é“çš„åŠŸèƒ½ã€‚å¦‚æœæ‚¨æ­£åœ¨æ„å»ºè‡ªå·±çš„è‡ªå®šä¹‰æ’­æ”¾å™¨æˆ–æƒ³è¦æä¾›è‡ªå·±çš„åª’ä½“é€‰æ‹©ç•Œé¢ï¼Œåˆ™å¯ä»¥ä½¿ç”¨AVFoundationÂ AVMediaSelectionGroupå’ŒAVMediaSelectionOptionç±»æä¾›çš„åŠŸèƒ½ã€‚</p>
<p>AVMediaSelectionOptionå°è£…äº†èµ„æºå…ƒæ•°æ®é‡Œæä¾›çš„å¯ä¾›é€‰æ‹©çš„ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œæ–‡å­—ã€‚åª’ä½“é€‰é¡¹ç”¨æ¥å®ç°é€‰æ‹©å¯æ›¿æ¢ç›¸æœºçš„è§’åº¦ï¼Œé€‰æ‹©æœ¬åœ°åŒ–è¯­è¨€ï¼Œæ˜¾ç¤ºå­—å¹•æˆ–éšè—å¼å­—å¹•ã€‚å¯ä»¥é€šè¿‡availableMediaCharacteristicsWithMediaSelectionOptionsæ¥è·å¾—æ’­æ”¾èµ„æºæ”¯æŒå“ªäº›é€‰é¡¹ã€‚</p>
<p>è·å–æ”¯æŒçš„å­—å¹•</p>
<pre><code class="language-swift">for characteristic in asset.availableMediaCharacteristicsWithMediaSelectionOptions {
 
    print(&quot;\(characteristic)&quot;)
    // Retrieve the AVMediaSelectionGroup for the specified characteristic.
    if let group = asset.mediaSelectionGroup(forMediaCharacteristic: characteristic) {
        // Print its options.
        for option in group.options {
            print(&quot;  Option: \(option.displayName)&quot;)
        }
    }
}
</code></pre>
<p>è·å–åª’ä½“é€‰é¡¹</p>
<pre><code class="language-swift">if let group = asset.mediaSelectionGroup(forMediaCharacteristic: AVMediaCharacteristicLegible) {
    let locale = Locale(identifier: &quot;es-ES&quot;)
    let options =
        AVMediaSelectionGroup.mediaSelectionOptions(from: group.options, with: locale)
    if let option = options.first {
        // Select Spanish-language subtitle option
        playerItem.select(option, in: group)
    }
}
</code></pre>
<h3 id="åå°æ’­æ”¾å’Œè¿œç¨‹æ§åˆ¶">åå°æ’­æ”¾å’Œè¿œç¨‹æ§åˆ¶</h3>
<p>å¯¹äºåå°æ’­æ”¾ï¼Œå¦‚æœä½¿ç”¨ AVPlayerViewController è¿›å…¥åå°æ—¶ï¼Œéœ€è¦åšä¸€äº›ç‰¹æ®Šé…ç½®ï¼š</p>
<pre><code class="language-swift">func applicationDidEnterBackground(_ application: UIApplication) {
    // If presenting video with AVPlayerViewController
    playerViewController.player = nil
    // If presenting video with AVPlayerLayer
    playerLayer.player = nil
}
 
func applicationWillEnterForeground(_ application: UIApplication) {
    // If presenting video with AVPlayerViewController
    playerViewController.player = player
    // If presenting video with AVPlayerLayer
    playerLayer.player = player
}
</code></pre>
<p>å¿«æ·é¢æ¿çš„ä¿¡æ¯é…ç½®ï¼š</p>
<pre><code class="language-swift">		var info = Dictionary&lt;String, Any&gt;()
		info[MPMediaItemPropertyTitle] = ?//æ­Œå
		info[MPMediaItemPropertyArtist] = ? //ä½œè€…
        info[MPMediaItemPropertyArtwork] = MPMediaItemArtwork.init(boundsSize: size, requestHandler: { (size) -&gt; UIImage in
            if image.isSome{ return image! }
            return UIImage.init(named: &quot;ImagePlaceHolder&quot;)!
        })
		info[MPNowPlayingInfoPropertyAssetURL] = ?
		info[MPMediaItemPropertyPlaybackDuration] = self.totalTime
		info[MPNowPlayingInfoPropertyPlaybackRate] = 1.0
        info[MPNowPlayingInfoPropertyElapsedPlaybackTime] = self.currentTime
		info[MPMediaItemPropertySkipCount] = NSNumber.init(value: 15)
		MPNowPlayingInfoCenter.default().nowPlayingInfo = info
        UIApplication.shared.registerForRemoteNotifications()
</code></pre>
<p>è¿œç¨‹æ§åˆ¶çš„é…ç½®ä¿¡æ¯ï¼š</p>
<pre><code class="language-swift">        // å‰è¿›è·³è½¬æ–‡æœ¬æ˜¾ç¤ºæ—¶é—´é—´éš”
		MPRemoteCommandCenter.shared().skipBackwardCommand.preferredIntervals = [15.0]
        // åé€€è·³è½¬æ–‡æœ¬æ˜¾ç¤ºæ—¶é—´é—´éš”
		MPRemoteCommandCenter.shared().skipForwardCommand.preferredIntervals = [15.0]
        // å‰è¿›æŒ‰é’®å“åº”äº‹ä»¶
		MPRemoteCommandCenter.shared().skipForwardCommand.addTarget { (event) -&gt; MPRemoteCommandHandlerStatus in
            // do something
			return .success
		}
		// åé€€æŒ‰é’®å“åº”äº‹ä»¶
		MPRemoteCommandCenter.shared().skipBackwardCommand.addTarget { (event) -&gt; MPRemoteCommandHandlerStatus in
			// do something
			return .success
		}
		// æ’­æ”¾æŒ‰é’®å“åº”äº‹ä»¶
		MPRemoteCommandCenter.shared().playCommand.addTarget { (event) -&gt; MPRemoteCommandHandlerStatus in
			// do something
			return .success
		}
		// æš‚åœæŒ‰é’®å“åº”äº‹ä»¶
		MPRemoteCommandCenter.shared().pauseCommand.addTarget { (event) -&gt; MPRemoteCommandHandlerStatus in
			// do something
			return .success
		}

</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ APP çš„ä¸€æ¬¡å¯åŠ¨ä¼˜åŒ–]]></title>
        <id>https://blog.wutao.xyz/post/app-de-yi-ci-qi-dong-you-hua/</id>
        <link href="https://blog.wutao.xyz/post/app-de-yi-ci-qi-dong-you-hua/">
        </link>
        <updated>2019-08-03T06:27:28.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>å½“ App è¿­ä»£åˆ°ä¸€å®šé˜¶æ®µï¼Œä¸šåŠ¡é€æ¸å¢å¤šï¼Œé¡¹ç›®ä¸æ–­å˜å¤§ï¼Œå¯åŠ¨æ—¶é—´ä¼˜åŒ–æ˜¯ä¸€ä¸ªå¿…ç»çš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ä»å¯åŠ¨è¿‡ç¨‹æ¥æå‡ºå‡ ä¸ªä¼˜åŒ–ç‚¹ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="å‰è¨€">å‰è¨€</h1>
<p>å½“ App è¿­ä»£åˆ°ä¸€å®šé˜¶æ®µï¼Œä¸šåŠ¡é€æ¸å¢å¤šï¼Œé¡¹ç›®ä¸æ–­å˜å¤§ï¼Œå¯åŠ¨æ—¶é—´ä¼˜åŒ–æ˜¯ä¸€ä¸ªå¿…ç»çš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ä»å¯åŠ¨è¿‡ç¨‹æ¥æå‡ºå‡ ä¸ªä¼˜åŒ–ç‚¹ã€‚</p>
<!-- more -->
<p>å¼ºçƒˆå»ºè®®è§‚çœ‹ wwdc 2016 ç›¸å…³è§†é¢‘ <a href="https://developer.apple.com/videos/play/wwdc2016/406/">Optimizing App Startup Time</a></p>
<h1 id="å¼€å§‹">å¼€å§‹</h1>
<p>å…ˆæ”¾ä¸¤ä¸ªå¯åŠ¨æ—¶é—´å¯¹æ¯”ï¼Œåªæ˜¯ä¸€èˆ¬çš„æ•°æ®ï¼Œç²¾å‡†åº¦æ²¡æœ‰å¾ˆé«˜ï¼Œä½†æ˜¯ä¸¤ä¸ªåœ¨åŒç§æ¡ä»¶ä¸‹çš„è€—æ—¶è¿˜æ˜¯å…·æœ‰ä¸€å®šå¯¹æ¯”æ€§.</p>
<pre><code>// ä¸€ä¸ªæ–°å»ºçš„å·¥ç¨‹åœ¨ pre-main æœŸé—´çš„è€—æ—¶æ•°æ®
Total pre-main time:  85.98 milliseconds (100.0%)
         dylib loading time:  35.28 milliseconds (41.0%)
        rebase/binding time:  12.73 milliseconds (14.8%)
            ObjC setup time:   4.40 milliseconds (5.1%)
           initializer time:  33.56 milliseconds (39.0%)
</code></pre>
<pre><code>// è‹å®æ™ºèƒ½çš„è€—æ—¶æ•°æ®
Total pre-main time: 1.7 seconds (100.0%)
         dylib loading time: 418.45 milliseconds (23.9%)
        rebase/binding time: 111.41 milliseconds (6.3%)
            ObjC setup time: 413.69 milliseconds (23.6%)
           initializer time: 802.37 milliseconds (45.9%)
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»ä¸Šé¢çš„ log å¼€å§‹åˆ†æåœ¨ App å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œåšäº†å“ªäº›äº‹æƒ…ã€‚</p>
<h3 id="app-å¯åŠ¨æµç¨‹">APP å¯åŠ¨æµç¨‹</h3>
<p>è¿™é‡Œçš„å¯åŠ¨ç‰¹æŒ‡ã€Œå†·å¯åŠ¨ã€ï¼Œè¿™ç§å¯åŠ¨æ˜¯ä¸€ç§å®Œæ•´çš„å¯åŠ¨æµç¨‹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿçš„è¿›ç¨‹åˆ›å»ºã€‚</p>
<h4 id="å¯åŠ¨æ—¶ç³»ç»Ÿéƒ½åšäº†é‚£äº›äº‹">å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿéƒ½åšäº†é‚£äº›äº‹ï¼Ÿ</h4>
<p>ä»ç”¨æˆ·ç‚¹å‡» APP åˆ°é¦–é¡µæ˜¾ç¤ºï¼Œä¸šç•Œæœ‰å¤šç§ä¸åŒçš„é˜¶æ®µåˆ’åˆ†æ–¹å¼ï¼Œæ¯”è¾ƒä¸»æµçš„æ˜¯å°†å…¶åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>main() å‡½æ•°æ‰§è¡Œå‰ï¼ˆpre-mainé˜¶æ®µï¼‰ï¼›</li>
<li>main() å‡½æ•°æ‰§è¡Œåï¼›</li>
<li>é¦–é¡µæ¸²æŸ“å®Œæˆä¹‹å</li>
</ul>
<h4 id="main-å‡½æ•°å¯åŠ¨å‰">main() å‡½æ•°å¯åŠ¨å‰</h4>
<p>main() å‡½æ•°å¯åŠ¨å‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸º pre-main é˜¶æ®µï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œobjc æºç ä¸­æ— æ³•debugï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¸»è¦æ˜¯ dyld å·¥ä½œï¼ŒåŒ…æ‹¬åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç¬¦å·ç»‘å®šç­‰ç­‰ ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å…ˆä¸è¦ä»”ç»†æ‹†åˆ†æ•´ä¸ªæµç¨‹ï¼Œå…ˆä»ä¸Šé¢çš„ pre-main å¯åŠ¨æ—¶é—´åˆ†æçš„ log æ¥çœ‹ä¸€çœ‹è¿™æœŸé—´ä¸»è¦åšäº†å“ªäº›äº‹æƒ…ï¼š</p>
<ul>
<li>
<p><code>dylib loading</code><br>
åŠ è½½æ‰€æœ‰çš„å¯æ‰§è¡Œæ–‡ä»¶ Mach-O ã€‚</p>
</li>
<li>
<p><code>rebase/binding</code><br>
åŠ è½½åŠ¨æ€é“¾æ¥åº“ dyldï¼Œdyld é€’å½’çš„åŠ è½½æ‰€æœ‰çš„ä¾èµ–åŠ¨æ€åº“ã€‚å¹¶è¿›è¡Œ rebase æŒ‡é’ˆè°ƒæ•´å’Œ bind ç¬¦å·ç»‘å®šã€‚</p>
</li>
<li>
<p><code>ObjC setup</code><br>
Objc runtime çš„åˆå§‹å¤„ç†ï¼ŒåŒ…æ‹¬ Objc ç›¸å…³ç±»çš„æ³¨å†Œã€category æ³¨å†Œã€selector å”¯ä¸€æ€§æ£€æŸ¥ç­‰ã€‚</p>
</li>
<li>
<p><code>initializer</code><br>
ä»åå­—å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œä¸»è¦è¿›è¡Œåˆå§‹åŒ–ã€‚å…¶ä¸­åŒ…æ‹¬æ‰§è¡Œ + load() æ–¹æ³•ã€‚ attribute((constructor))  ä¿®é¥°çš„å‡½æ•°çš„è°ƒç”¨ã€åˆ›å»º C++ é™æ€å…¨å±€å˜é‡ã€‚</p>
</li>
</ul>
<h4 id="main-å‡½æ•°ä¹‹å">main() å‡½æ•°ä¹‹å</h4>
<p>è¿™é‡ŒæŒ‡çš„æ˜¯ä» main() æ‰§è¡Œå¼€å§‹ï¼Œåˆ° didFinishLaunchingWithOptionsæ–¹æ³•ä¸­ keyWindow æ¸²æŸ“æ‰§è¡Œå®Œæ¯•ä¹‹åã€‚</p>
<p>è¿™é‡Œä¸»è¦æ˜¯åˆ›å»ºå…¨å±€çš„ autoreleasepool å’Œæ¸²æŸ“é¦–å±ç›¸å…³çš„é…ç½®æ–‡ä»¶çš„è¯»å–ï¼Œæ¸²æŸ“çš„è®¡ç®—ç­‰ç­‰ã€‚</p>
<h4 id="é¦–å±æ¸²æŸ“å®Œæˆå">é¦–å±æ¸²æŸ“å®Œæˆå</h4>
<p>ä¸»è¦åŒ…å«å’Œéé¦–å±é¡µé¢æ¸²æŸ“ä¸ç›¸å…³çš„ä¸šåŠ¡ï¼Œæ¨¡å—çš„åˆå§‹åŒ–ï¼Œé…ç½®æ–‡ä»¶çš„è¯»å–ç­‰ç­‰ã€‚<br>
è¿™ä¸ªé˜¶æ®µç”¨æˆ·å·²ç»çœ‹åˆ°é¡µé¢äº†ï¼Œå…¶å®ä¸å½±å“é¦–å±çš„æ•°æ®æ—¶é—´ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨çº¿ç¨‹é˜»å¡ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¼šå½±å“åˆ°ç”¨æˆ·çš„ä½“éªŒï¼Œè¿˜æ˜¯è¦æ³¨é‡ä¸€ä¸‹ã€‚</p>
<h3 id="ä¼˜åŒ–æ–¹å‘">ä¼˜åŒ–æ–¹å‘</h3>
<p>ä»å¯åŠ¨æµç¨‹çš„å‡ ä¸ªé˜¶æ®µæ¥çœ‹ï¼Œpre-main å’Œ main() å‡½æ•°å¯åŠ¨ä¹‹åå çš„æ¯”é‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†å…³äºæ—¶é—´çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥é’ˆå¯¹è¿™äº›æ¥åšã€‚</p>
<h4 id="pre-main">pre-main</h4>
<ul>
<li>åŠ¨æ€åº“çš„åŠ è½½<br>
ä¸Šé¢çš„è€—æ—¶æ—¥å¿—ä¸­ï¼Œæˆ‘çœç•¥äº†é¡¹ç›®ä¸­åŠ¨æ€åº“çš„è€—æ—¶æ˜¾ç¤ºï¼Œè¿™é‡Œæ”¾ä¸¤ä¸ªé¡¹ç›®ä¸­å¼•ç”¨çš„ä¸¤ä¸ªåŠ¨æ€åº“çš„åŠ è½½æ—¶é—´çš„ log:</li>
</ul>
<pre><code>CloudyTrace_IOS :  84.64 milliseconds
ZDKDynamicFramework :  15.28 milliseconds 
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨æ€åº“çš„è€—æ—¶è¿˜æ˜¯æŒºå¤šçš„ï¼Œå…¶ä¸­ <em>CloudyTrace_IOS</em> è¿™ä¸ªåŠ¨æ€åº“çš„åŠ è½½æ—¶é—´å‡ ä¹å’Œä¸€ä¸ªæ–°å»ºé¡¹ç›®çš„ pre-main é˜¶æ®µæ€»è€—æ—¶è¿˜å¤šã€‚å¹¶ä¸”æ¯ä¸€ä¸ªåŠ¨æ€åº“æœ¬èº«ä¹Ÿéƒ½æœ‰ä¾èµ–å…³ç³»ã€‚<br>
è‹¹æœåœ¨ wwdc ä¸Šä¹Ÿå»ºè®®å°‘ä½¿ç”¨åŠ¨æ€åº“ï¼Œå¹¶ä¸”å°½å¯èƒ½å°†åŠ¨æ€åº“è¿›è¡Œåˆå¹¶ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥åšçš„æªæ–½æœ‰ä¸¤ä¸ªï¼š<br>
1ã€åˆå¹¶åŠ¨æ€åº“ï¼Œå‡å°‘åŠ¨æ€åº“çš„ä¸ªæ•°ï¼Œè¿™é‡Œæ¨èä¸€ä¸ª grab å¼€æºçš„ä¸€ä¸ª<a href="https://github.com/grab/cocoapods-pod-merge">å·¥å…·</a>ï¼Œå¯ä»¥å°†å¤šä¸ªä¾èµ–åˆå¹¶ï¼›</p>
<p>2ã€å°†ä¾èµ–è½¬å˜æœªé™æ€åº“ï¼Œåªéœ€è¦åœ¨ <strong>Podfile</strong> ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒåªæ”¯æŒ 1.7.x ä»¥ä¸Šç‰ˆæœ¬</p>
<pre><code class="language-ruby"># Add these in your Podfile (available for CocoaPods v1.7.x+)

target 'YourApp' do
    # all you pods here...
end

pre_install do |installer|
  puts &quot;Make pods linked statically except reserved pods&quot;
  installer.pod_targets.each do |pod|
    if !keep_dynamically_linked.include?(pod.name)
      puts &quot;Override the static_framework? method for #{pod.name}&quot;
      def pod.build_type;
        Pod::Target::BuildType.static_framework
      end
    end
  end
end
</code></pre>
<p>è¿™ç§æ–¹å¼å¯èƒ½ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ä¸¤ä¸ªåŠ¨æ€åº“ä¸­å­˜åœ¨ç›¸åŒå‘½åçš„æ–‡ä»¶ï¼Œè¿™æ ·ä¼šå¼•èµ·å†²çªï¼Œå¹¶ä¸” github ä¸­ä¹Ÿæœ‰ä¸€äº›ç›¸å…³çš„ issuesï¼Œå­˜åœ¨ä¸€äº›å¼€å‘è€…å†ä½¿ç”¨è¿‡ç¨‹ä¸èµ·æ•ˆæœçš„é—®é¢˜ã€‚</p>
<ul>
<li>ObjC setup &amp; initializer</li>
</ul>
<p>åœ¨è¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­ï¼Œdyld ä¼šå°†å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­çš„äºŒè¿›åˆ¶æ•°æ®äº¤ç»™ runtime åŠ è½½ä¸º objc å®šä¹‰çš„ç»“æ„ã€‚é€šè¿‡ <code>call_load_methods</code> éå†æ‰€æœ‰çš„ç±»ï¼Œåœ¨éå†æœŸé—´ï¼Œé€šè¿‡ <code>call_class_loads</code> å’Œ <code>call_class_loads</code> æ¥è°ƒç”¨ class çš„ <code>+load</code> æ–¹æ³•å’Œ Category çš„ <code>+load</code> æ–¹æ³•ã€‚è¿™ä¹Ÿå°±è¯´æ˜ï¼Œç±»è¶Šå¤šï¼Œæ–¹æ³•è¶Šå¤šï¼Œåˆ™è€—æ—¶è¶Šå¤šã€‚<br>
è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯åœ¨ä¸€ä¸ª <code>+load</code> æ–¹æ³•é‡Œï¼Œè¿›è¡Œè¿è¡Œæ—¶æ–¹æ³•æ›¿æ¢æ“ä½œä¼šå¸¦æ¥4æ¯«ç§’çš„æ¶ˆè€—ã€‚</p>
<p>å…³äºè¿™ä¸ªé˜¶æ®µçš„ä¼˜åŒ–è‡ªç„¶å¯¹åº”çš„å°±æ˜¯ï¼š</p>
<ul>
<li>åˆ é™¤æ— ç”¨çš„ç±»å’Œæ— ç”¨çš„æ–¹æ³•ï¼Œå‡å°‘ç±»çš„æ•°ç›®</li>
<li>æ‰€ä»¥å°½é‡å°† <code>+load</code> æ–¹æ³•ï¼Œæ›¿æ¢ä¸º <code>initialize</code>æ–¹æ³•ã€‚é™ä½<code>+load</code>çš„æ‰§è¡Œæ¬¡æ•°</li>
<li>æ§åˆ¶ C++ å…¨å±€å˜é‡çš„æ•°é‡ã€‚</li>
</ul>
<h4 id="main-å‡½æ•°è°ƒç”¨ä¹‹å">main() å‡½æ•°è°ƒç”¨ä¹‹å</h4>
<p>æˆ‘ä»¬ç»å¸¸å°†ç¬¬ä¸‰æ–¹åº“çš„æ³¨å†Œå’Œåˆå§‹åŒ–æ”¾åœ¨ didFinishLaunchingWithOptions ä¸­ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦çš„ä¼˜åŒ–ç‚¹å…¶å®å°±æ˜¯ï¼š<br>
æ¢³ç†ä¸šåŠ¡ï¼Œå°†é¦–å±æ¸²æŸ“ç”¨ä¸åˆ°çš„ä¸šåŠ¡æ”¾åˆ°æ¸²æŸ“ä¹‹åå»åšï¼Œå°†ä¸éœ€è¦ç«‹å³åˆå§‹åŒ–å’Œä¸éœ€è¦åœ¨ä¸»çº¿ç¨‹åˆå§‹åŒ–çš„ï¼Œéƒ½æ”¾åœ¨å¼‚æ­¥è¿›è¡Œå»¶æ—¶åŠ è½½ã€‚</p>
<p>æœ€åæ”¾ä¸Šç¬¬ä¸€é˜¶æ®µä¼˜åŒ–åçš„ logï¼š</p>
<pre><code>// è‹å®æ™ºèƒ½çš„è€—æ—¶æ•°æ®
Total pre-main time: 822.32 seconds (100.0%)
         dylib loading time: 210.71 milliseconds (25.6%)
        rebase/binding time:  60.37 milliseconds (7.3%)
            ObjC setup time: 87.20 milliseconds (10.6%)
           initializer time: 464.04 milliseconds (56.4%)
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¦‚ä½•åˆ›å»ºä¸€ä¸ª Xcode server Bot ï¼ˆè‡ªåŠ¨æ‰“åŒ…æœºå™¨äººï¼‰]]></title>
        <id>https://blog.wutao.xyz/post/ru-he-chuang-jian-yi-ge-xcode-server-bot-zi-dong-da-bao-ji-qi-ren/</id>
        <link href="https://blog.wutao.xyz/post/ru-he-chuang-jian-yi-ge-xcode-server-bot-zi-dong-da-bao-ji-qi-ren/">
        </link>
        <updated>2019-06-17T06:47:28.000Z</updated>
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•åˆ›å»ºä¸€ä¸ª-xcode-server-bot-è‡ªåŠ¨æ‰“åŒ…æœºå™¨äºº">å¦‚ä½•åˆ›å»ºä¸€ä¸ª Xcode server Bot ï¼ˆè‡ªåŠ¨æ‰“åŒ…æœºå™¨äººï¼‰</h1>
<h2 id="æ¦‚è¿°">æ¦‚è¿°</h2>
<p>ä¸ºäº†è§£å†³å¹³æ—¶ç”Ÿäº§è¿‡ç¨‹ä¸­æ‰“åŒ…æµç¨‹ç¹çï¼Œæ‰“åŒ…åˆ†æ•£ï¼Œä¸åŒå¼€å‘äººå‘˜æ‰“åŒ…é…ç½®ä¸åŒå¯¼è‡´çš„åŒ…åŠŸèƒ½ä¸å…¨ç­‰é—®é¢˜ã€‚ç»è¿‡ç ”ç©¶å‡ ç§è‡ªåŠ¨åŒ–æ‰“åŒ…æ–¹æ³•ï¼Œç°å†³å®šä½¿ç”¨è‹¹æœæœªå¼€å‘äººå‘˜æä¾›çš„è‡ªåŠ¨åŒ–æ‰“åŒ…æ–¹æ¡ˆï¼ŒXcode server è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
<h2 id="xcode-server-æ˜¯ä»€ä¹ˆ">Xcode server æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Xcode Serverï¼Œè‹¹æœæä¾›äº†ä¸€ä¸ªè‡ªå¸¦çš„ CI æ–¹æ¡ˆï¼Œå¯ä»¥ç†è§£ä¸º Jenkins å’Œ fastlane çš„åŠŸèƒ½é›†åˆä½“ï¼Œæ˜¯ä¸€ä¸ªæŒç»­åŒ–é›†æˆå’Œæ‰“åŒ…æµ‹è¯•å·¥å…·ã€‚å…·ä½“æè¿°å’ŒåŠŸèƒ½ï¼Œè¯·è‡ªè¡Œç™¾åº¦/ googleã€‚</p>
<h2 id="é…ç½®æ–¹æ³•">é…ç½®æ–¹æ³•</h2>
<p>é¦–å…ˆè¿æ¥å†…ç½‘ï¼ŒåŸå› æ˜¯ï¼Œç‰ˆæœ¬ç®¡ç†æ˜¯åŸºäºå†…ç½‘çš„ gitlabï¼Œè€Œ Xcode server ä¾èµ–äº git æœåŠ¡ã€‚</p>
<p>ç„¶åæ‰“å¼€ Xcode é€‰æ‹©å·¦è¾¹åŠŸèƒ½æ çš„æ ‡è¯†å¤„</p>
<figure data-type="image" tabindex="1"><img src="https://ws3.sinaimg.cn/large/006tNc79gy1g3ci8tchnpj30b5026aau.jpg" alt="" loading="lazy"></figure>
<p>ç„¶åé€‰æ‹© SmartHome çš„ Mac mini ï¼ˆXcode server æœåŠ¡æä¾›æœºå™¨ï¼‰<br>
è¿™é‡Œæ˜¯å› ä¸ºä¹‹å‰çš„é…ç½®å·²ç»å®Œæˆï¼Œæˆ‘ç›´æ¥çœç•¥äº†éƒ¨ç½² Xcode server æ­¥éª¤ï¼Œæœ‰å…´è¶£è¯·è‡ªè¡Œäº†è§£ğŸ˜‚</p>
<figure data-type="image" tabindex="2"><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g3cibgx6a2j309o08nwi8.jpg" alt="" loading="lazy"></figure>
<p>ç„¶åé€‰æ‹© Create Bot</p>
<figure data-type="image" tabindex="3"><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3cicw8rbnj309w0dvahp.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬ä¸€æ­¥  è¾“å…¥ Bot åå­—å’Œéƒ¨ç½² Xcode server æœåŠ¡çš„æœºå™¨ï¼ˆåå­—å»ºè®®å’Œç‰ˆæœ¬åˆ†æ”¯å…³è”ï¼Œå°½é‡è¯¦ç»†ä¸€äº›ï¼‰</p>
<figure data-type="image" tabindex="4"><img src="https://ws3.sinaimg.cn/large/006tNc79gy1g3cinqgrfnj30kc0c0gnh.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬äºŒæ­¥ éªŒè¯ git æœåŠ¡çš„è´¦å·å¯†ç </p>
<figure data-type="image" tabindex="5"><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3cioreubsj30kd0c040m.jpg" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="6"><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3cioreubsj30kd0c040m.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬ä¸‰æ­¥ é€‰æ‹©æƒ³è¦è‡ªåŠ¨æ‰“åŒ…çš„åˆ†æ”¯</p>
<figure data-type="image" tabindex="7"><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g3cipqvncij30kc0c343b.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬å››æ­¥ é€‰æ‹©å¯¼å‡ºæ–¹å¼ï¼Œè¿™é‡Œé€‰æ‹©è‡ªå®šä¹‰å¯¼å‡º</p>
<figure data-type="image" tabindex="8"><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g3cir7u4jsj30kg0c0418.jpg" alt="" loading="lazy"></figure>
<p>è‡ªå®šä¹‰å¯¼å‡ºéœ€è¦ä¸€ä¸ª exportoption plistï¼Œ è¿™ä¸ªä¸»è¦æ˜¯å‘Šè¯‰ server æœ¬æ¬¡æ‰“åŒ…çš„ä¸€äº›é…ç½®ï¼Œä¾‹å¦‚æ‰“åŒ…æ–¹å¼ï¼Œæè¿°æ–‡ä»¶å’Œè¯ä¹¦é…ç½®ä¹‹ç±»çš„è®¾å®šï¼Œ<br>
è·å–æ–¹å¼ï¼šæ‰‹åŠ¨å¯¼å‡ºä¸€ä¸ª ipa å¯ä»¥è·å–ã€‚</p>
<figure data-type="image" tabindex="9"><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g3ciu0z7h9j30m70bmjso.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬äº”æ­¥ é€‰æ‹©æ‰“åŒ…é¢‘ç‡<br>
ä¸»è¦æœ‰ä¸‰ä¸ªé€‰æ‹©ï¼Œå‘¨æœŸæ€§ï¼Œæ‰‹åŠ¨å’Œæ£€æµ‹åˆ° commit<br>
ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œ å‘¨æœŸæ€§é¡¾åæ€ä¹‰ï¼Œå¯ä»¥è®¾å®šåœ¨æ¯å¤©æˆ–è€…æ¯ä¸ªå°æ—¶ï¼Œæˆ–è€…æ¯å‘¨æ‰“åŒ…ï¼›<br>
æ‰‹åŠ¨å°±æ˜¯ï¼Œæ¯æ¬¡æœ‰éœ€è¦æ—¶ï¼Œç”±å¼€å‘äººå‘˜æ‰‹åŠ¨å¼€å¯æ‰“åŒ…ï¼›<br>
Commit æ˜¯æ¯æ¬¡æ£€æµ‹åˆ° å½“å‰é›†æˆåˆ†æ”¯æœ‰ commit æ—¶ï¼Œè‡ªåŠ¨å¼€å¯æ‰“åŒ…æµç¨‹ã€‚<br>
æœ¬æ¬¡æˆ‘ä»¬é€‰æ‹© <strong>å‘¨æœŸæ€§æ‰“åŒ…</strong>ï¼Œ åœ¨æ¯å¤©çš„ 9ç‚¹ï¼Œ14ç‚¹å’Œ 19ç‚¹è¿›è¡Œæ‰“åŒ…ã€‚</p>
<figure data-type="image" tabindex="10"><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3ciup6uv0j30kc0c0q67.jpg" alt="" loading="lazy"></figure>
<p>ç¬¬äº”æ­¥ é€‰æ‹©ä¸ºæŒ‡å®šè®¾å¤‡æ‰“åŒ…<br>
å¯ä»¥é€‰æ‹©ä»…ä¸ºçœŸå®è®¾å¤‡æ‰“åŒ…ï¼Œæˆ–è€…ä¸ºçœŸå®è®¾å¤‡å’Œæ¨¡æ‹Ÿå™¨ä¸€èµ·æ‰“åŒ…ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸ºçœŸå®è®¾å¤‡æ‰“åŒ…ï¼ˆå…¶å®éƒ½å¯ä»¥ğŸ˜œï¼‰<br>
<img src="https://ws2.sinaimg.cn/large/006tNc79gy1g3cj03o1mwj30ke0bz778.jpg" alt="" loading="lazy"></p>
<p>ç¬¬å…­æ­¥ï¼Œ ç¬¬ä¸ƒæ­¥ å¯ä»¥è·³è¿‡ï¼Œä¸éœ€é…ç½®</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g3cj2tyi5uj30kf0c2tax.jpg" alt="" loading="lazy"><br>
<img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3cj3isgw3j30ke0c0taw.jpg" alt="" loading="lazy"></p>
<p>ç¬¬å…«æ­¥  æ·»åŠ è„šæœ¬<br>
è¿™ä¸ªé…ç½®ä¸»è¦ç”¨æ¥åšä¸€äº›é¢å¤–æ“ä½œï¼Œæ¯”å¦‚åœ¨æ‰“åŒ…å‰ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ›´æ–°ä¸‹ podï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€‰æ‹© Pre-integration æ·»åŠ æ“ä½œè„šæœ¬ï¼ŒåŸºäº bashï¼›</p>
<figure data-type="image" tabindex="11"><img src="https://ws1.sinaimg.cn/large/006tNc79gy1g3cj3rkjabj30kh0c6q5n.jpg" alt="" loading="lazy"></figure>
<p>åœ¨æœ¬ Bot ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰“åŒ…å®Œæˆåï¼Œè‡ªåŠ¨å°†å¯¼å‡ºçš„ ipa ä¸Šä¼ åˆ°å†…ç½‘ ipa ä»“åº“ï¼›<br>
æ‰€ä»¥é€‰æ‹© Post-integrationï¼Œå¹¶æ·»åŠ ä»¥ä¸‹è„šæœ¬ï¼š</p>
<pre><code class="language-bash">
# æ‰“å° ipa è·¯å¾„ 
echo $XCS_PRODUCT

# è‹å®æ™ºèƒ½ appId
appId=&quot;8&quot;

# è‹å®æ™ºèƒ½ versionId
versionId=&quot;542&quot;

# ipa ä¸Šä¼ è·¯å¾„
uploadUrl=&quot;xxxxxxx/upload.json&quot;

# ipa åç§°
ipa_Name=&quot;Smarthome&quot;

# ipa bundle_id
bundle_id=&quot;com.suning.intelligence&quot;

# ä¸Šä¼ åŒ…åˆ° ipa
curl -F &quot;appId=${appId}&quot; -F &quot;versionId=${versionId}&quot; -F &quot;bundleId=${bundle_id}&quot; -F &quot;ipaDesc=${ipaName}&quot; -F &quot;ipaFile=@$XCS_PRODUCT&quot; ${uploadUrl}


</code></pre>
<figure data-type="image" tabindex="12"><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g3cj8pu2r8j30kd0cr0vo.jpg" alt="" loading="lazy"></figure>
<p>æœ€ç»ˆç‚¹å‡» Done å®Œæˆï¼Œé…ç½®å®Œæˆåï¼Œä¼šè¿›è¡Œåˆæ¬¡æ‰“åŒ…ï¼Œå¯èƒ½ä¼šæœ‰å„ç§æ£€æµ‹ï¼Œå› æ­¤æ—¶é—´è¾ƒé•¿ï¼Œå¤§çº¦ 30minï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¹³å‡æ‰“åŒ…æ—¶é—´åœ¨ 11min ä¹‹å†…ï¼ˆå½“ç„¶äº†ï¼Œçœ‹é…ç½®ï¼‰ã€‚</p>
<h2 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h2>
<p>1ã€ç”±äºæ¯æ¬¡æ‰“åŒ…ï¼ŒServer éƒ½ä¼šä»é›†æˆåˆ†æ”¯æ‹‰å»æœ€æ–°ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿è¯æäº¤ä»£ç æ—¶ bundleid å’Œè¯ä¹¦é…ç½®éœ€è¦ä¸º release é…ç½®</p>
<figure data-type="image" tabindex="13"><img src="https://ws2.sinaimg.cn/large/006tNc79gy1g3cjdb6bwlj30zm0kltbs.jpg" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node.js + MongoDB + Nginx çº¿ä¸Šéƒ¨ç½²]]></title>
        <id>https://blog.wutao.xyz/post/nodejs-mongodb-nginx-xian-shang-bu-shu/</id>
        <link href="https://blog.wutao.xyz/post/nodejs-mongodb-nginx-xian-shang-bu-shu/">
        </link>
        <updated>2018-09-17T06:53:10.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="nodejs-mongodb-nginx-çº¿ä¸Šéƒ¨ç½²">Node.js + MongoDB + Nginx çº¿ä¸Šéƒ¨ç½²</h1>
<p>Linux ç‰ˆæœ¬ä¸º centos7</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="nodejs-mongodb-nginx-çº¿ä¸Šéƒ¨ç½²">Node.js + MongoDB + Nginx çº¿ä¸Šéƒ¨ç½²</h1>
<p>Linux ç‰ˆæœ¬ä¸º centos7</p>
 <!-- more --> 
<h2 id="å®‰è£…-nodejs">å®‰è£… node.js</h2>
<p>é¦–å…ˆç›´æ¥ä½¿ç”¨ yum å®‰è£…</p>
<pre><code>$	yum -y install nodejs
</code></pre>
<p>ä½†æ˜¯æ­¤æ—¶å¹¶ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œ åº”è¯¥æ˜¯6.xxxï¼Œå¯ä»¥ä½¿ç”¨ <code>node -v</code> æŸ¥çœ‹ï¼›</p>
<h4 id="å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬">å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</h4>
<p>é¦–å…ˆå®‰è£… <strong>n</strong>(nodejs ç®¡ç†å·¥å…·)</p>
<pre><code>$ npm install -g n
</code></pre>
<p>å®‰è£…å®Œæˆåå®‰è£… node.js æœ€æ–°ç‰ˆæœ¬</p>
<pre><code>$ n latest
</code></pre>
<p>ç„¶åä½¿ç”¨</p>
<pre><code>$ n
</code></pre>
<p>é€‰æ‹©æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<h2 id="å®‰è£…-mongodb">å®‰è£… MongoDB</h2>
<p>é¦–å…ˆç¼–å†™ yum åº“æ–‡ä»¶</p>
<pre><code>$  sudo vi /etc/yum.repos.d/mongodb-org.repo
</code></pre>
<p>å°†ä¸‹é¢æ–‡æœ¬å†™å…¥</p>
<pre><code>[mongodb-org-3.4]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.4.asc
</code></pre>
<p>ä¿å­˜å¹¶é€€å‡ºï¼›<br>
æ£€æŸ¥å¯ç”¨åº“ï¼š</p>
<pre><code>$  yum repolist
</code></pre>
<p>å¦‚æœçœ‹åˆ°</p>
<pre><code>. . .
repo id                          repo name
mongodb-org-3.2/7/x86_64         MongoDB Repository
. . .
</code></pre>
<p>å°±å¯ä»¥è¿›è¡Œå®‰è£…æ“ä½œ</p>
<pre><code>$  sudo yum install mongodb-org
</code></pre>
<p>å®‰è£…ç»“æŸåï¼Œå¯åŠ¨å®ƒ</p>
<pre><code>$  sudo systemctl start mongod
</code></pre>
<p>å¦‚æœéœ€è¦åœ¨å¤–éƒ¨è¿æ¥ MongoDB, è¿˜éœ€è¦å°† bindIp ç”± <strong>127.0.0.1</strong> åˆ‡æ¢ä¸º <strong>0.0.0.0</strong></p>
<pre><code>vi /etc/mongod.conf

# network interfaces
net:
  port: 27017
  bindIp: 0.0.0.0  # Listen to local interface only, comment to listen on all interfaces.
</code></pre>
<h2 id="å®‰è£…-nginx">å®‰è£… Nginx</h2>
<p>å‰æœŸå‡†å¤‡</p>
<pre><code>$  yum install gcc-c++
$  yum -y install zlib zlib-devel openssl openssl--devel pcre pcre-devel
</code></pre>
<p>å®‰è£…ç»“æŸåï¼Œæ‰§è¡Œå®‰è£… Nginx çš„å‘½ä»¤ï¼š</p>
<pre><code>$  yum install nginx -y
</code></pre>
<h4 id="åå‘ä»£ç†é…ç½®">åå‘ä»£ç†é…ç½®</h4>
<p>è¿›å…¥ nginx æ–‡ä»¶å¤¹</p>
<pre><code>$  cd /etc/nginx
</code></pre>
<p>æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code>$  vim nginx.conf
</code></pre>
<p>å¿½ç•¥å…¶ä»–ï¼Œæˆ‘ä»¬çœ‹ serverï¼Œ åˆ é™¤å¤šä½™çš„ï¼Œå°† server æ”¹é€ æˆä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code>    server {
        listen       80;
        server_name  _;
        root         /usr/share/nginx/html;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }

</code></pre>
<p>ç„¶åæˆ‘ä»¬æ–°å¢è‡ªå·±çš„ä»£ç†é…ç½®,ç±»ä¼¼äºä¸‹é¢ï¼š</p>
<pre><code>    server {
        listen 80;
        server_name xxx.com www.xxx.top;
        location / {
                proxy_pass http://127.0.0.1:8080;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_set_header X-Nginx-Proxy true;
                proxy_redirect off;
        }
    }

</code></pre>
<p>è§£é‡Šä¸‹ï¼š</p>
<ul>
<li>server_nme æ˜¯åŸŸåï¼Œè¿™è¾¹å¯ä»¥é…ç½®ä¸€çº§æˆ–è€…äºŒçº§åŸŸåï¼›</li>
<li>proxy_pass æ˜¯ipï¼Œé€šå¸¸ç›´æ¥ä»¥ 127.0.0.1 ä»£æ›¿ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å†™ä½ äº‘æœåŠ¡å™¨çš„å…¬ç½‘ipï¼›</li>
</ul>
<p>å…¶ä»–çš„ç…§ç€å†™å°±ğŸ‘Œï¼Œ ä¸Šé¢æ–‡æœ¬è¾¾æˆçš„æ•ˆæœæ˜¯ï¼Œä½¿ç”¨ server_name ä»£æ›¿ç›´æ¥è®¿é—® ip.<br>
Ps. server_name åªèƒ½å¡«å†™åŸŸåè§£æåçš„åŸŸåï¼Œå¹¶ä¸”éœ€è¦åœ¨äº‘æœåŠ¡å™¨å®‰å…¨ç»„ä¸­æ·»åŠ  80 ç«¯å£çš„æ”¯æŒè§„åˆ™ã€‚</p>
<h4 id="ssl-é…ç½®">SSL é…ç½®</h4>
<p>é¦–å…ˆè¦ç”³è¯·è¯ä¹¦ï¼Œå¹¶ä¸”ä¸‹è½½åˆ°æœ¬åœ°ã€‚<br>
é€šå¸¸å®ƒä»¬ä¼šæ˜¯è¿™æ ·å‘½åï¼š</p>
<pre><code>// xxx æ˜¯åŸŸå
cert-1541562634350_xxx.crt
cert-1541562634350_xxx.key
</code></pre>
<p>ä¸‹è½½å®Œåï¼Œä½¿ç”¨ FTP ç­‰åŒç±»å·¥å…·ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œåœ¨ <strong>/etc/nginx</strong> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <strong>cert</strong>,å°†è¿™è¿™ä¸¤ä¸ªæ–‡ä»¶ç§»åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼›</p>
<p>æ¥ç€ç¼–å†™  nginx.conf</p>
<pre><code>    server {
        listen       443 ssl;
        server_name  *.xxx.com;
        root         /usr/share/nginx/html;

        ssl_certificate /etc/nginx/cert/cert-1541562634350_www.funnyfm.top.crt;
        ssl_certificate_key /etc/nginx/cert/cert-1541562634350_www.funnyfm.top.key;
        ssl_session_cache shared:SSL:1m;
        ssl_session_timeout  10m;
        ssl_ciphers HIGH:!aNULL:!MD5;
        ssl_prefer_server_ciphers on;

        location / {
                proxy_pass http://127.0.0.1:8080;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header Host $http_host;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }
        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
</code></pre>
<p>å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>SSL ç›‘å¬çš„æ˜¯ 443 ç«¯å£ï¼Œéœ€è¦åœ¨å®‰å…¨è§„åˆ™ä¸­æ·»åŠ ï¼›</li>
<li>æ¯ä¸€ä¸ª SSL server éœ€è¦å¯¹åº”ä¸€ä¸ª http 80 çš„server</li>
</ul>
<p>ç¼–å†™ç»“æŸåï¼Œéœ€è¦é‡å¯ Nginx</p>
<pre><code>$  nginx -s reload
</code></pre>
<p>å¥½äº†ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨ <code>xxx.com</code> æ¥ä»£æ›¿ç›´æ¥è®¿é—® ip äº†ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä» objc_msgSend å¼€å§‹æ¢ç©¶æ–¹æ³•æ‰§è¡Œçš„å…¨éƒ¨æµç¨‹]]></title>
        <id>https://blog.wutao.xyz/post/cong-objc_msgsend-lai-liao-liao-runtime/</id>
        <link href="https://blog.wutao.xyz/post/cong-objc_msgsend-lai-liao-liao-runtime/">
        </link>
        <updated>2018-07-08T08:47:23.000Z</updated>
        <summary type="html"><![CDATA[<blockquote>
<p>ä»¥ä¸‹å¯¹æºç çš„åˆ†æéƒ½åŸºäº objc4-750 ç‰ˆæœ¬</p>
</blockquote>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ¬æ–‡å°†ä» <code>objc_msgSend</code> å¼€å§‹ä¸€æ­¥æ­¥çš„æ¢ç©¶æ–¹æ³•æ‰§è¡Œçš„å…¨éƒ¨æµç¨‹ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<blockquote>
<p>ä»¥ä¸‹å¯¹æºç çš„åˆ†æéƒ½åŸºäº objc4-750 ç‰ˆæœ¬</p>
</blockquote>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ¬æ–‡å°†ä» <code>objc_msgSend</code> å¼€å§‹ä¸€æ­¥æ­¥çš„æ¢ç©¶æ–¹æ³•æ‰§è¡Œçš„å…¨éƒ¨æµç¨‹ã€‚</p>
<!-- more --> 
<p>å¯¹äº iOS å¼€å‘è€…æ¥è¯´ï¼Œ<strong>runtime</strong> æ˜¯ä¸€ä¸ªæ— æ³•é¿å…çš„ï¼Œéœ€è¦æ·±å…¥äº†è§£çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚ä½†æ˜¯æºç çš„å¤æ‚ï¼Œæ–‡ä»¶æ•°ç›®çš„ç¹å¤šå¯¹äºæˆ‘ä»¬ç†è§£å®ƒå¹¶ä¸å‹å¥½ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¥½çš„åˆ‡å…¥ç‚¹å°±å°¤ä¸ºé‡è¦ã€‚</p>
<h2 id="æ¶ˆæ¯æœºåˆ¶">æ¶ˆæ¯æœºåˆ¶</h2>
<p>objc_msgSend å‡½æ•°æ˜¯æ‰€æœ‰ OC æ–¹æ³•è°ƒç”¨çš„æ ¸å¿ƒå¼•æ“ï¼Œå®ƒè´Ÿè´£æŸ¥æ‰¾çœŸå®çš„ç±»æˆ–è€…å¯¹è±¡æ–¹æ³•çš„å®ç°ï¼Œå¹¶å»æ‰§è¡Œè¿™äº›æ–¹æ³•å‡½æ•°ï¼Œåº•å±‚ç”±æ±‡ç¼–è¯­è¨€ç¼–å†™ã€‚</p>
<pre><code class="language-c">objc_msgSend(id _Nullable self, SEL _Nonnull op, ...)
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯çš„æ¥å—è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>SEL</code>ï¼Œ åé¢ä¸å®šæ•°ç›®çš„å‚æ•°æ˜¯ <code>SEL</code> æ‰€éœ€çš„å‚æ•°ã€‚<br>
é‚£ä¹ˆ <code>objc_msgSend</code> çš„æ‰§è¡Œæµç¨‹æ˜¯ä»€ä¹ˆCå‘¢ï¼Ÿå®ƒåˆæ¶‰åŠåˆ°å“ªäº›æ–¹æ³•å‘¢ï¼Ÿ</p>
<h2 id="æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹</h2>
<p><code>objc_msgSend()</code> çš„æ‰§è¡Œæµç¨‹å¯ä»¥åˆ†ä¸º 3 å¤§é˜¶æ®µï¼š</p>
<ul>
<li>æ¶ˆæ¯å‘é€ï¼ˆæ–¹æ³•æŸ¥æ‰¾ï¼‰</li>
<li>åŠ¨æ€æ–¹æ³•è§£æ</li>
<li>æ¶ˆæ¯è½¬å‘<br>
è¿™ä¸‰ä¸ªæµç¨‹å¹¶ä¸æ€»ä¼šåŒæ—¶å‘ç”Ÿï¼›<br>
<em>åŠ¨æ€æ–¹æ³•è§£æ</em> å–å†³äº <em>æ¶ˆæ¯å‘é€</em> çš„ç»“æœï¼›<br>
<em>æ¶ˆæ¯è½¬å‘</em> å–å†³äº <em>åŠ¨æ€è§£æçš„ç»“æœ</em>ï¼›</li>
</ul>
<h3 id="æ¶ˆæ¯å‘é€æ–¹æ³•æŸ¥æ‰¾">æ¶ˆæ¯å‘é€ï¼ˆæ–¹æ³•æŸ¥æ‰¾ï¼‰</h3>
<p>å…ˆæ¥çœ‹çœ‹ <strong>æ¶ˆæ¯å‘é€</strong> çš„æµç¨‹ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€æ­¥<br>
<code>objc_msgSend</code> é¦–å…ˆä¼šåˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯çš„ receiver (æ¥å—å¯¹è±¡)ï¼Œå¦‚æœ receiver ä¸º nilï¼Œé‚£ä¹ˆç›´æ¥é€€å‡ºæµç¨‹ï¼›å¦‚æœä¸ä¸º nil æ¥ç€ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>ç¬¬äºŒæ­¥<br>
å¦‚æœ receiver ä¸ä¸º nilï¼Œ å» receiver çš„ class çš„ cache ä¸­æŸ¥æ‰¾æ–¹æ³•ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œé‚£ä¹ˆæ‰§è¡Œæ–¹æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œæ¥ç€ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>ç¬¬ä¸‰æ­¥<br>
åœ¨ receiver.class çš„ cache ä¸­æœªæ‰¾åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆå°†å»ç±»çš„ class_rw_t ä¸­æŸ¥æ‰¾æ–¹æ³•ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œé‚£ä¹ˆæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶å°†æ–¹æ³•ä¿å­˜åˆ° cache ä¸­ï¼›å¦‚æœæœªæ‰¾åˆ°ï¼Œæ¥ç€ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>ç¬¬å››æ­¥<br>
å¦‚æœåœ¨ class_rw_t ä¸­æœªæ‰¾åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šä» superclass çš„ cache ä¸­æŸ¥æ‰¾æ–¹æ³•ï¼Œå¦‚æœæŸ¥æ‰¾åˆ°ï¼Œé‚£ä¹ˆæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶ä¸”å­˜å‚¨åˆ° receiver.class çš„ cache ä¸­ï¼›å¦‚æœæœªæŸ¥æ‰¾åˆ°ï¼Œæ¥ç€ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>ç¬¬äº”æ­¥<br>
å¦‚æœåœ¨ superclass çš„ cache ä¸­æœªæ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šä» superclass çš„ class_rw_t ä¸­æŸ¥æ‰¾æ–¹æ³•ï¼Œå¦‚æœæŸ¥æ‰¾åˆ°ï¼Œé‚£ä¹ˆæ‰§è¡Œæ–¹æ³•ï¼Œå¹¶ä¸”å­˜å‚¨åˆ° receiver.class çš„ cache ä¸­ï¼›å¦‚æœæœªæŸ¥æ‰¾åˆ°ï¼Œæ¥ç€ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>ç¬¬å…­æ­¥<br>
å¦‚æœåœ¨ receiver.class çš„ superclass ä¸­æœªæŸ¥æ‰¾åˆ°æ–¹æ³•ï¼Œé‚£ä¹ˆä¼šåˆ¤æ–­ superclass æ˜¯å¦æœ‰ superclassï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆä¼šé‡å¤ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥ï¼› å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆä¼šè¿›å…¥åŠ¨æ€æ–¹æ³•è§£ææµç¨‹ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸Šå°±æ˜¯<strong>æ¶ˆæ¯å‘é€</strong>çš„å…¨éƒ¨æµç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬é€šè¿‡è¿™ä¸ªæµç¨‹ï¼Œçœ‹çœ‹å…¶ä¸­æ¶‰åŠçš„ä¸€äº›ç›¸å…³çŸ¥è¯†ã€‚</p>
<p>é¦–å…ˆ receiver , receiverClass , receiverClass.superclass ä¹‹é—´çš„ç›¸å…³è”ç³»ï¼Œreceiver çš„æ–¹æ³•æ˜¯å­˜å‚¨åœ¨ä»€ä¹ˆåœ°æ–¹çš„Â ï¼Ÿ<br>
é¦–å…ˆä¸Šä¸€å¼ ç»å…¸å›¾ï¼š</p>
<figure data-type="image" tabindex="1"><img src="http://blog.leichunfeng.com/images/object_model.png" alt="" loading="lazy"></figure>
<p>è¿™å¼ å›¾æ˜¯è‹¹æœå®˜æ–¹å¯¹ç±»çš„è§£é‡Šï¼Œæ¯ä¸ªå®ä¾‹ï¼ˆinstanceï¼‰éƒ½æœ‰è‡ªå·±çš„ç±»ï¼ˆclassï¼‰ï¼Œæ¯ä¸ªç±»ä¹Ÿæœ‰è‡ªå·±çš„å…ƒç±»ï¼ˆmeta-classï¼‰ï¼›å®ä¾‹ï¼Œç±»ï¼Œå…ƒç±»éƒ½æœ‰ isa æŒ‡é’ˆï¼Œå®ä¾‹çš„ isa æŒ‡é’ˆï¼ŒæŒ‡å‘ç±»ï¼Œç±»çš„ isa æŒ‡é’ˆæŒ‡å‘å…ƒç±»ï¼Œå…ƒç±»çš„ isa æŒ‡é’ˆæŒ‡å‘åŸºç±»çš„å…ƒç±»ï¼ŒåŸºç±»çš„å…ƒç±»çš„æŒ‡é’ˆæŒ‡å‘è‡ªå·±ã€‚</p>
<p>æˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹ï¼ŒOC ä¸­å¯¹è±¡çš„æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="language-C">struct objc_class : objc_object {
    // Class ISA;
    Class superclass;         
    cache_t cache;             // æ–¹æ³•ç¼“å­˜
    class_data_bits_t bits;    // ç”¨äºè·å–å…·ä½“çš„ç±»ä¿¡æ¯ 

    class_rw_t *data() { 
        return bits.data();
    }
};

struct class_data_bits_t {
    uintptr_t bits;
public:
    class_rw_t* data() {
        return (class_rw_t *)(bits &amp; FAST_DATA_MASK);
    }
};

// ç±»ç›¸å…³è¯»å†™ä¿¡æ¯
struct class_rw_t {
    // Be warned that Symbolication knows the layout of this structure.
    uint32_t flags;
    uint32_t version;

    const class_ro_t *ro;

    method_array_t methods;       // æ–¹æ³•åˆ—è¡¨
    property_array_t properties;  // å±æ€§åˆ—è¡¨
    protocol_array_t protocols;   // åè®®åˆ—è¡¨

    Class firstSubclass;
    Class nextSiblingClass;

    char *demangledName;
};

// ç±»ç›¸å…³çš„åªè¯»ä¿¡æ¯ï¼Œåªä¿å­˜äº†åˆå§‹å†…å®¹
struct class_ro_t {
    uint32_t flags;
    uint32_t instanceStart;
    uint32_t instanceSize;  // instanceå¯¹è±¡å ç”¨çš„å†…å­˜ç©ºé—´
#ifdef __LP64__
    uint32_t reserved;
#endif
    const uint8_t * ivarLayout;    
    const char * name;  
    method_list_t * baseMethodList;  
    protocol_list_t * baseProtocols;
    const ivar_list_t * ivars; 
    const uint8_t * weakIvarLayout;
    property_list_t *baseProperties;
    method_list_t *baseMethods() const {
        return baseMethodList;
    }
};
</code></pre>
<p>é€šè¿‡ä¸Šè¿°ä»£ç å’Œå…¶ä¸­çš„ä¸€äº›è§£é‡Šï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ä»–ä»¬ä¹‹é—´çš„è”ç³»ï¼Œè¿™é‡Œå†è§£é‡Šä¸€ä¸‹ <code>class_ro_t</code> å’Œ <code>class_rw_t</code> ä¹‹é—´çš„å…³ç³»ã€‚<br>
<code>class_ro_t</code> å­˜å‚¨äº†åˆå§‹çš„å†…å®¹ï¼Œæ˜¯åªè¯»çš„ï¼Œä¸å¯æ”¹ã€‚runtime åˆå§‹åŒ–æ—¶åœ¨ <code>realizeClass()</code> å‡½æ•°ä¸­å°†å…¶ä¸­çš„å†…å®¹å’Œåˆ†ç±»ä¸­çš„å†…å®¹åˆå¹¶èµ·æ¥æ”¾å…¥ <code>class_rw_t</code> ä¸­ï¼Œå¹¶å°† class çš„ bits æŒ‡å‘ <code>class_rw_t</code>ã€‚</p>
<h3 id="åŠ¨æ€æ–¹æ³•è§£æ">åŠ¨æ€æ–¹æ³•è§£æ</h3>
<p>è¿™ä¸€æ­¥æ˜¯è¿è¡Œæ—¶çš„ç¬¬ä¸€ä¸ªå¯¹æ— æ³•æ‰¾åˆ°çš„æ–¹æ³•çš„æŒ½æ•‘æªæ–½ï¼Œå¦‚æœåŠ¨æ€è§£ææˆåŠŸï¼Œé‚£ä¹ˆä¼šä» <strong>æ¶ˆæ¯å‘é€</strong>æµç¨‹çš„ç¬¬äºŒæ­¥å¼€å§‹é‡æ–°èµ°å‘é€æµç¨‹ï¼Œå¦‚æœæ²¡æœ‰æˆåŠŸï¼Œé‚£ä¹ˆå°†ä¼šè¿›è¡Œä¸‹ä¸€æ­¥<strong>æ¶ˆæ¯è½¬å‘</strong>æµç¨‹ã€‚<br>
<strong>åŠ¨æ€æ–¹æ³•è§£æ</strong>æœ‰ä¸‹é¢å‡ æ­¥ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥<br>
æ ¹æ®æ–¹æ³•çš„ç±»å‹ï¼ˆå®ä¾‹æ–¹æ³•è¿˜æ˜¯ç±»æ–¹æ³•ï¼‰runtime ä¼šè°ƒç”¨ï¼š<pre><code class="language-C">+(BOOL)resolveInstanceMethod:(SEL)sel
+(BOOL)resolveClassMethod:(SEL)sel
</code></pre>
</li>
</ul>
<p>é‡å†™ä¸Šè¿°ä»£ç ï¼ŒåŠ¨æ€æ·»åŠ æ–¹æ³•çš„å®ç°ï¼š</p>
<pre><code>BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types)
</code></pre>
<h3 id="åŠ¨æ€æ¶ˆæ¯è½¬å‘">åŠ¨æ€æ¶ˆæ¯è½¬å‘</h3>
<p>å¦‚æœâ€œæ¶ˆæ¯å‘é€â€é˜¶æ®µæœªæ‰¾åˆ°æ–¹æ³•çš„å®ç°ï¼Œä¸”é€šè¿‡<strong>åŠ¨æ€æ–¹æ³•è§£æ</strong>æ²¡æœ‰è§£å†³ï¼Œ å°±è¿›å…¥<strong>æ¶ˆæ¯è½¬å‘</strong>é˜¶æ®µï¼Œ<strong>æ¶ˆæ¯è½¬å‘</strong>é˜¶æ®µåˆ†ä¸¤æ­¥è¿›è¡Œï¼šFast forwarding å’Œ Normal forwardingã€‚</p>
<p><strong>Fast forwarding</strong><br>
å°†æ¶ˆæ¯è½¬å‘ç»™ä¸€ä¸ªå…¶å®ƒ OC å¯¹è±¡ï¼ˆæ‰¾ä¸€ä¸ªå¤‡ç”¨æ¥æ”¶è€…ï¼‰ï¼Œ æˆ‘ä»¬å¯ä»¥é‡å†™ä»¥ä¸‹æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªé receiver çš„å¯¹è±¡ï¼Œæ¥å®Œæˆè¿™ä¸€æ­¥éª¤ï¼š</p>
<pre><code class="language-c">+/- (id)forwardingTargetForSelector:(SEL)sel;
</code></pre>
<p><strong>Normal forwarding</strong><br>
é€šè¿‡å®ç°ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯è½¬å‘è¿‡ç¨‹ï¼Œ å¦‚æœä¸Šä¸€æ­¥æ²¡èƒ½è§£å†³æœªçŸ¥æ¶ˆæ¯ï¼Œå¯ä»¥é‡å†™ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å¯åŠ¨å®Œæ•´çš„æ¶ˆæ¯è½¬å‘ï¼š<br>
ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼šæˆ‘ä»¬éœ€è¦åœ¨è¯¥æ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªé€‚åˆè¯¥æœªçŸ¥æ¶ˆæ¯çš„æ–¹æ³•ç­¾åï¼ˆæ–¹æ³•ç­¾åå°±æ˜¯å¯¹è¿”å›å€¼ç±»å‹ã€å‚æ•°ç±»å‹çš„æè¿°ï¼Œå¯ä»¥ä½¿ç”¨ Type Encodings ç¼–ç ï¼Œ</p>
<pre><code class="language-c">+/- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector
// Runtime ä¼šæ ¹æ®è¿™ä¸ªæ–¹æ³•ç­¾åï¼Œåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ï¼ˆNSInvocationå°è£…äº†æœªçŸ¥æ¶ˆæ¯çš„å…¨éƒ¨å†…å®¹ï¼ŒåŒ…æ‹¬ï¼šæ–¹æ³•è°ƒç”¨è€… targetã€æ–¹æ³•å selectorã€æ–¹æ³•å‚æ•° argument ç­‰ï¼‰ï¼Œç„¶åè°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•å¹¶å°†è¯¥NSInvocationå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
</code></pre>
<p>ç¬¬äºŒä¸ªæ–¹æ³•ï¼šæˆ‘ä»¬å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­, å°†æœªçŸ¥æ¶ˆæ¯è½¬å‘ç»™å…¶å®ƒå¯¹è±¡ï¼›æ”¹å˜æœªçŸ¥æ¶ˆæ¯çš„å†…å®¹(å¦‚æ–¹æ³•åã€æ–¹æ³•å‚æ•°)å†è½¬å‘ç»™å…¶å®ƒå¯¹è±¡ï¼›ç”šè‡³å¯ä»¥å®šä¹‰ä»»ä½•é€»è¾‘ã€‚</p>
<pre><code class="language-c">+/- (void)forwardInvocation:(NSInvocation *)invocation
</code></pre>
<p>å¦‚æœç¬¬ä¸€ä¸ªæ–¹æ³•ä¸­æ²¡æœ‰è¿”å›æ–¹æ³•ç­¾åï¼Œæˆ–è€…æˆ‘ä»¬æ²¡æœ‰é‡å†™ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œç³»ç»Ÿå°±ä¼šè®¤ä¸ºæˆ‘ä»¬å½»åº•ä¸æƒ³å¤„ç†è¿™ä¸ªæ¶ˆæ¯äº†ï¼Œè¿™æ—¶å€™å°±ä¼šè°ƒç”¨<code>+/- (void)doesNotRecognizeSelector:(SEL)sel</code>æ–¹æ³•å¹¶æŠ›å‡ºç»å…¸çš„ <code>crash:unrecognized selector sent to instance/class</code>ï¼Œç»“æŸ objc_msgSend çš„å…¨éƒ¨æµç¨‹ã€‚</p>
<pre><code>+ (id)forwardingTargetForSelector:(SEL)sel {
    return nil;
}
+ (NSMethodSignature *)methodSignatureForSelector:(SEL)sel {
    _objc_fatal(&quot;+[NSObject methodSignatureForSelector:] &quot;
                &quot;not available without CoreFoundation&quot;);
}
+ (void)forwardInvocation:(NSInvocation *)invocation {
    [self doesNotRecognizeSelector:(invocation ? [invocation selector] : 0)];
}
+ (void)doesNotRecognizeSelector:(SEL)sel {
    _objc_fatal(&quot;+[%s %s]: unrecognized selector sent to instance %p&quot;, 
                class_getName(self), sel_getName(sel), self);
}
</code></pre>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯ <code>runtime</code> ä¸­å…³äºæ¶ˆæ¯å‘é€çš„æ‰€æœ‰æµç¨‹ã€‚<br>
æ·±å…¥äº†è§£è¿™äº›æµç¨‹å’Œç»†èŠ‚åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒå®ç°å¾ˆå¤šæœ‰æ„æ€çš„äº‹æƒ…ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ¢ç©¶ Runloop åº•å±‚ç»“æ„ ]]></title>
        <id>https://blog.wutao.xyz/post/tan-jiu-runloop/</id>
        <link href="https://blog.wutao.xyz/post/tan-jiu-runloop/">
        </link>
        <updated>2018-06-17T06:54:29.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="æ¢ç©¶-runloop">æ¢ç©¶ Runloop</h1>
<blockquote>
<p>å¯¹äº iOS å¼€å‘è€…æ¥è¯´ï¼Œ Runloop åº”è¯¥æ˜¯å¤§å®¶éƒ½ç†Ÿæ‚‰çš„ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯æœ¬äººåœ¨é˜…è¯»æºç æ—¶çš„ä¸€äº›ç†è§£ã€‚</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<h1 id="æ¢ç©¶-runloop">æ¢ç©¶ Runloop</h1>
<blockquote>
<p>å¯¹äº iOS å¼€å‘è€…æ¥è¯´ï¼Œ Runloop åº”è¯¥æ˜¯å¤§å®¶éƒ½ç†Ÿæ‚‰çš„ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯æœ¬äººåœ¨é˜…è¯»æºç æ—¶çš„ä¸€äº›ç†è§£ã€‚</p>
</blockquote>
<!-- more --> 
<h3 id="runloop-ç›¸å…³ç»“æ„ä½“">Runloop ç›¸å…³ç»“æ„ä½“</h3>
<p>Objective-C æ˜¯å¯¹ C çš„å°è£…ï¼Œæ‰€ä»¥ä¸€åˆ‡ç›¸å…³çš„åº•å±‚å…¶å®éƒ½æ˜¯é€šè¿‡ C æ¥å®ç°çš„ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹ Runloop ç›¸å…³çš„æ¦‚å¿µã€‚<br>
è¿™é‡Œè¯´çš„ Runloop å¹¶ä¸æ˜¯ Apple åœ¨ iOS ä¸­çš„å®ç°ï¼Œå› ä¸º iOS ä¸æ˜¯å¼€æºçš„ã€‚æˆ‘ä»¬ç°åœ¨æ‰€è¯´çš„å…¶å®åªæ˜¯ Apple å¼€æºçš„ CF æ¡†æ¶çš„æºç ï¼Œä½†æ˜¯ç®¡ä¸­çª¥è±¹ï¼Œé€šè¿‡å®ƒä¹Ÿèƒ½äº†è§£ Apple çš„æ€è·¯ã€‚</p>
<h4 id="__cfrunloop">__CFRunLoop</h4>
<p>é¦–å…ˆæ˜¯ Runloopï¼Œåº•å±‚æ˜¯ C çš„ç»“æ„ä½“</p>
<pre><code class="language-C">struct __CFRunLoop {
    __CFPort _wakeUpPort;			// used for CFRunLoopWakeUp 
    volatile _per_run_data *_perRunData;   // é¢„è®¾çŠ¶æ€
    pthread_t _pthread; // çº¿ç¨‹
    CFMutableSetRef _commonModes; // å­˜å‚¨ ModeName
    CFMutableSetRef _commonModeItems; 
    CFRunLoopModeRef _currentMode; // å½“å‰ Mode
    CFMutableSetRef _modes;  // æ‰€æœ‰çš„ Mode
    ...
};
</code></pre>
<p>ä¸Šé¢åˆ—å‡ºçš„æ˜¯ç›¸å¯¹é‡è¦çš„éƒ¨åˆ†ï¼Œ æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçœ‹ã€‚æ²¡æœ‰ç»†è¯´çš„æ³¨æ„çœ‹ä»£ç å—ä¸­çš„æ³¨é‡Š<br>
é¦–å…ˆ <strong>_wakeUpPort</strong> è¿™æ˜¯ç”¨æ¥è¿›è¡Œå”¤é†’ Runloop çš„ç‰¹å®šç«¯å£ï¼›<br>
ç„¶åæ˜¯ <strong>_perRunData</strong> è¿™ä¸ªéœ€è¦ç»“åˆä¸‹é¢ä»£ç æ¥çœ‹ï¼š</p>
<pre><code class="language-C">// æ˜¯å¦æ˜¯ åœæ­¢çŠ¶æ€
CF_INLINE Boolean __CFRunLoopIsStopped(CFRunLoopRef rl) {
    return (rl-&gt;_perRunData-&gt;stopped) ? true : false;
}

// æ ‡è®°ä¸ºåœæ­¢çŠ¶æ€
CF_INLINE void __CFRunLoopSetStopped(CFRunLoopRef rl) {
    rl-&gt;_perRunData-&gt;stopped = 0x53544F50;	// 'STOP'
}

...

</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œrunloop çš„å¾ˆå¤šçŠ¶æ€éƒ½æ˜¯å­˜å‚¨åœ¨ <strong>_perRunData</strong> ä¹‹ä¸­çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹åšæ˜¯ runloop çš„çŠ¶æ€æŒ‡ç¤ºå™¨ã€‚</p>
<p><strong>_pthread</strong> çš„ç±»å‹æ˜¯ <strong>pthread_t</strong> ï¼Œè¿™æ˜¯ pthread çš„åº•å±‚ï¼Œè¿™æ ·ä¹Ÿè¯´æ˜äº†ï¼Œä¸ºä»€ä¹ˆçº¿ç¨‹å’Œ <strong>runloop</strong> æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼›</p>
<p><strong>_commonModes</strong> è¿™æ˜¯ä¸€ä¸ªé›†åˆï¼Œ ä¸»è¦å­˜å‚¨ç€ modenameï¼›</p>
<p><strong>_commonModeItems</strong> ä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆï¼Œ ä¸»è¦å­˜å‚¨ç€ modename å¯¹åº”çš„ <strong>CFRunLoopModeRef</strong> ä¸­çš„ Source/Observer/Timerï¼›</p>
<h4 id="cfrunloopmoderef">CFRunLoopModeRef</h4>
<p>é€šè¿‡ Runloop çš„ç»“æ„ä½“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>CFRunLoopModeRef</strong> åœ¨å…¶ä¸­å æ®å¾ˆå¤§çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»§ç»­çœ‹ <strong>CFRunLoopModeRef</strong> æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š</p>
<pre><code class="language-C">struct __CFRunLoopMode {
    CFStringRef _name;
    CFMutableSetRef _sources0;
    CFMutableSetRef _sources1;
    CFMutableArrayRef _observers;
    CFMutableArrayRef _timers;
    ...
};
</code></pre>
<p>å¾ˆé•¿ä¸€æ®µï¼Œæˆ‘åªè´´å‡ºæ¥ä¸€éƒ¨åˆ†ï¼Œå…¶ä»–å¯ä»¥çœ‹æºç ã€‚å¯ä»¥çœ‹åˆ°ä¹Ÿæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ˆå…¶å®æ‰€æœ‰OCç±»çš„åº•å±‚å®ç°éƒ½æ˜¯Cä¸­çš„ç»“æ„ä½“ï¼‰ã€‚</p>
<p>åœ¨è¿™å…¶ä¸­ï¼Œå…¶å®å°±æ˜¯ä¸‰ç±»æˆå‘˜ï¼Œ<strong>__CFRunLoopSource</strong>ï¼Œ <strong>__CFRunLoopObserver</strong> å’Œ <strong>__CFRunLoopTimer</strong>ã€‚</p>
<p>å®ƒä»¬çš„å…³ç³»å¯ä»¥çœ‹è¿™å¹…å›¾ï¼Œæ¯”è¾ƒç›´è§‚ï¼š<br>
<img src="https://blog.ibireme.com/wp-content/uploads/2015/05/RunLoop_0.png" alt="" loading="lazy"></p>
<p>é‚£ä¹ˆç»§ç»­ï¼Œæˆ‘ä»¬åœ¨èŠèŠè¿™ä¸‰ä¸ªå®¶ä¼™æ˜¯ä¸ªå•¥ã€‚</p>
<h4 id="__cfrunloopsource">__CFRunLoopSource</h4>
<p>Mode ç»“æ„ä½“ä¸­ source æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªsource0ï¼Œä¸€ä¸ªsource1ã€‚<br>
å…ˆè¯´ä¸‹ï¼Œsource æ˜¯ä»€ä¹ˆï¼Œrunloop ä¸­ï¼Œéœ€è¦ä¸€ä¸ªæ ‡è¯†æ¥å‘Šè¯‰å®ƒï¼Œæ˜¯å¦æœ‰äº‹ä»¶éœ€è¦å¤„ç†ï¼Œç„¶è€Œå•çº¯çš„ä½¿ç”¨ä¸€ä¸ªæ ‡è¯†ç¬¦æ— æ³•å®ç°æ¯”è¾ƒå¤æ‚çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™ source å°±å‡ºç°äº†ï¼Œé€šè¿‡è°ƒç”¨æ–¹æ³•ï¼Œæ¥å¾—åˆ°ä¸€ä¸ª BOOL å€¼ï¼Œé€šè¿‡è¿™ä¸ªå€¼æ¥ç¡®å®šæ˜¯å¦éœ€è¦å¤„ç†äº‹ä»¶ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿæˆ‘ä»¬éœ€è¦çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š</p>
<pre><code>	static int32_t __CFRunLoopRun(CFRunLoopRef rl, CFRunLoopModeRef rlm, CFTimeInterval seconds, Boolean stopAfterHandle, CFRunLoopModeRef previousMode){
			...
			Boolean sourceHandledThisLoop = __CFRunLoopDoSources0(rl, rlm, stopAfterHandle);
	    if (sourceHandledThisLoop) {
            __CFRunLoopDoBlocks(rl, rlm);
	    }
			...
			
			sourceHandledThisLoop = __CFRunLoopDoSource1(rl, rlm, rls, msg, msg-&gt;msgh_size, &amp;reply) || sourceHandledThisLoop;
	    sourceHandledThisLoop = __CFRunLoopDoSource1(rl, rlm, rls) || sourceHandledThisLoop;
			...
	
	}
	
</code></pre>
<p>è¿™æ˜¯ Runloop å¯åŠ¨æ–¹æ³•ï¼Œåé¢ä¼šä»”ç»†åˆ†æï¼Œç°åœ¨ä¸»è¦çœ‹è´´å‡ºæ¥çš„æ–¹æ³•ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œrunloop å¤„ç†äº‹ä»¶ä¸»è¦æ˜¯é€šè¿‡ä¸‰ä¸ªæ–¹æ³•ï¼š<br>
<strong>__CFRunLoopDoSources0</strong> ï¼Œ <strong>__CFRunLoopDoSource1</strong> å’Œ <strong>__CFRunLoopDoBlocks</strong>ã€‚</p>
<p>å‰ä¸¤ä¸ªæ˜¯ç”¨æ¥æ ‡å¿—æ˜¯å¦å­˜åœ¨éœ€è¦å¤„ç†çš„äº‹ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è°ƒç”¨ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼Œå¤„ç†äº‹ä»¶ã€‚</p>
<p>Source ä¹Ÿåˆ†ä¸º2ä¸ªç‰ˆæœ¬ Source0 å’Œ Source1ã€‚</p>
<p>â€¢ <strong>Source0</strong> åªåŒ…å«äº†ä¸€ä¸ªå›è°ƒï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œå®ƒå¹¶ä¸èƒ½ä¸»åŠ¨è§¦å‘äº‹ä»¶ã€‚ä½¿ç”¨æ—¶ï¼Œä½ éœ€è¦å…ˆè°ƒç”¨ CFRunLoopSourceSignal(source)ï¼Œå°†è¿™ä¸ª Source æ ‡è®°ä¸ºå¾…å¤„ç†ï¼Œç„¶åæ‰‹åŠ¨è°ƒç”¨ CFRunLoopWakeUp(runloop) æ¥å”¤é†’ RunLoopï¼Œè®©å…¶å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚</p>
<p>â€¢ <strong>Source1</strong> åŒ…å«äº†ä¸€ä¸ª mach_port å’Œä¸€ä¸ªå›è°ƒï¼ˆå‡½æ•°æŒ‡é’ˆï¼‰ï¼Œè¿™ç§ Source èƒ½ä¸»åŠ¨å”¤é†’ RunLoop çš„çº¿ç¨‹ã€‚</p>
<h4 id="cfrunlooptimerref">CFRunLoopTimerRef</h4>
<p><strong>CFRunLoopTimerRef</strong> å°±å¾ˆå¥½ç†è§£äº†ï¼Œå®ƒå®é™…ä¸Šæ˜¯å’Œ NSTimer æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåé¢è®¡åˆ’æœ‰ä¸€ç¯‡å…³äº <strong>NSTimer</strong> çš„æ–‡ç« ã€‚</p>
<pre><code class="language-C">
struct __CFRunLoopTimer {
    CFRunLoopRef _runLoop;
    CFMutableSetRef _rlModes;
    CFTimeInterval _interval;		/* immutable */
    CFTimeInterval _tolerance;          /* mutable */
    CFAbsoluteTime _nextFireDate;
    CFIndex _order;			/* immutable */
    CFRunLoopTimerCallBack _callout;	/* immutable */
    ...
};

</code></pre>
<p>çœ‹ä¸Šé¢çš„ç»“æ„ï¼Œ <strong>__CFRunLoopTimer</strong> ä¸»è¦åŒ…å«ä¸‹åˆ—ç›¸å…³ï¼š</p>
<p><strong>_runLoop</strong>ï¼šNSTimer å¿…é¡»å’Œ runloop é…åˆä½¿ç”¨ï¼Œé‚£ä¹ˆ timer æŒæœ‰ runloop æ˜¯å¯ä»¥ç†è§£å’¯ï¼›<br>
<strong>_interval</strong>ï¼š é—´éš”æ—¶é—´ï¼›<br>
<strong>_tolerance</strong>ï¼š å®¹å¿æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´å…è®¸å»¶è¿Ÿå¤šé•¿æ—¶é—´ï¼›<br>
<strong>_nextFireDate</strong>ï¼šä¸‹æ¬¡è§¦å‘æ—¶é—´ï¼Œç†è®ºä¸Šåº”è¯¥æ¯æ¬¡ç´¯åŠ  _interval ï¼Œä½†æ˜¯ç”±äºå®¹å¿åº¦çš„å­˜åœ¨ï¼Œå¹¶ä¸èƒ½ä¸¤æ¬¡ç›¸éš”æ—¶é—´å¹¶ä¸ä¸€å®šå’Œ _interval ç›¸ç­‰ï¼›<br>
<strong>_order</strong>ï¼š ä¼˜å…ˆçº§ï¼›<br>
<strong>_callout</strong>ï¼štimer å…³è”çš„å›è°ƒäº‹ä»¶ï¼›</p>
<h4 id="__cfrunloopobserver">__CFRunLoopObserver</h4>
<pre><code class="language-C">    struct __CFRunLoopObserver {
    CFRunLoopRef _runLoop;
    CFIndex _rlCount;
    CFOptionFlags _activities;		/* immutable */
    CFIndex _order;			/* immutable */
    CFRunLoopObserverCallBack _callout;	/* immutable */
};
</code></pre>
<p><strong>__CFRunLoopObserver</strong> ä¸­é™¤äº†å¸¸è§„çš„å‡ ä¸ªæˆå‘˜å¤–ï¼Œ æ¯”è¾ƒé‡è¦çš„åº”è¯¥å°±æ˜¯ <strong>_activities</strong> ï¼Œ å®ƒæ ‡è¯†äº† runloop çš„çŠ¶æ€ï¼Œä¸»è¦åŒ…æ‹¬</p>
<pre><code class="language-C">typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) {
    kCFRunLoopEntry = (1UL &lt;&lt; 0),               // å³å°†è¿›å…¥ Loop
    kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1),        // å³å°†å¤„ç† Timers
    kCFRunLoopBeforeSources = (1UL &lt;&lt; 2),       // å³å°†å¤„ç† Sources
    kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),       // å³å°†è¿›å…¥ä¼‘çœ 
    kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6),        // åˆšä»ä¼‘çœ ä¸­å”¤é†’
    kCFRunLoopExit = (1UL &lt;&lt; 7),                // å³å°†é€€å‡ºLoop
    kCFRunLoopAllActivities = 0x0FFFFFFFU
};

</code></pre>
<p>é€šè¿‡è¿™äº›çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­å‡º Loop æ­£å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®çŠ¶æ€ä¸åŒè€Œåšç›¸åº”çš„äº‹ä»¶ï¼Œæ¯”å¦‚ç›‘å¬ <code>kCFRunLoopBeforeWaiting</code>ï¼Œ åœ¨è¿™å°†åœ¨å¼‚æ­¥çº¿ç¨‹æ¸²æŸ“å¥½çš„UIåœ¨ä¸»çº¿ç¨‹è¿›è¡Œæ›´æ–°ï¼Œä»è€Œé¿å…å‡ºç°ä¸»çº¿ç¨‹é˜»å¡ï¼Œå¢åŠ é¡µé¢æµç•…åº¦ç­‰ç­‰ã€‚</p>
<p>å¥½äº†ï¼Œç›¸å…³çš„ç»“æ„ä½“å·²ç»ä»‹ç»å®Œ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[5æœˆé¢è¯•æ€»ç»“]]></title>
        <id>https://blog.wutao.xyz/post/5-yue-mian-shi-zong-jie/</id>
        <link href="https://blog.wutao.xyz/post/5-yue-mian-shi-zong-jie/">
        </link>
        <updated>2018-06-10T06:55:37.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="5æœˆé¢è¯•æ€»ç»“">5æœˆé¢è¯•æ€»ç»“</h1>
<blockquote>
<p>åŠ³åŠ¨èŠ‚å‡æœŸä¹‹åç¬¬ä¸€å¤©ï¼Œå…¬å¸CEOå¼€ä¼šå®£å¸ƒå› ä¸ºé¡¹ç›®æŠ•å…¥äº§å‡ºæ¯”æ²¡æœ‰è¾¾åˆ°é¢„æœŸï¼Œä¸‹ä¸€ç¬”æŠ•èµ„ä¸ä¼šåˆ°è´¦ï¼Œå…¬å¸èµ„é‡‘é“¾å®£å‘Šæ–­è£‚ã€‚æˆ‘æ­£å¼è¿›å…¥æ±‚èŒé˜¶æ®µã€‚ã€‚ã€‚è™½ç„¶è¯´å·²ç»5æœˆä»½äº†ã€‚ã€‚ã€‚</p>
</blockquote>
]]></summary>
        <content type="html"><![CDATA[<h1 id="5æœˆé¢è¯•æ€»ç»“">5æœˆé¢è¯•æ€»ç»“</h1>
<blockquote>
<p>åŠ³åŠ¨èŠ‚å‡æœŸä¹‹åç¬¬ä¸€å¤©ï¼Œå…¬å¸CEOå¼€ä¼šå®£å¸ƒå› ä¸ºé¡¹ç›®æŠ•å…¥äº§å‡ºæ¯”æ²¡æœ‰è¾¾åˆ°é¢„æœŸï¼Œä¸‹ä¸€ç¬”æŠ•èµ„ä¸ä¼šåˆ°è´¦ï¼Œå…¬å¸èµ„é‡‘é“¾å®£å‘Šæ–­è£‚ã€‚æˆ‘æ­£å¼è¿›å…¥æ±‚èŒé˜¶æ®µã€‚ã€‚ã€‚è™½ç„¶è¯´å·²ç»5æœˆä»½äº†ã€‚ã€‚ã€‚</p>
</blockquote>
<!-- more -->
<h3 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡</h3>
<p>å› ä¸ºæ­¤æ¬¡æ±‚èŒå¹¶ä¸æ˜¯ä¸»åŠ¨çš„ï¼Œæ¥çš„æ¯”è¾ƒçªç„¶ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›æ—¶é—´æ¥æ¢³ç†è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œå›é¡¾ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ã€‚äºæ˜¯èŠ±äº†å‡ å¤©æ—¶é—´ç†Ÿæ‚‰é¢è¯•é¢˜ã€‚</p>
<h3 id="ç®€å†æŠ•é€’é¡ºåº">ç®€å†æŠ•é€’é¡ºåº</h3>
<p>ä¸è¦æµ·æŠ•ï¼Œä¸è¦æµ·æŠ•ï¼Œä¸è¦æµ·æŠ•ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚<br>
å…ˆæ•´ä½“çœ‹ä¸€ä¸‹æœ€è¿‘çš„æ±‚èŒå¸‚åœºï¼Œå­¦ä¼šè¯„ä¼°å“ªäº›æ‹›è˜æ˜¯çš„ç¡®ç¼ºäººï¼Œè€Œå“ªäº›åªæ˜¯å¸¸å¹´æŒ‚ç€ã€‚<br>
ç­›é€‰å‡ºä¸€äº›æ¯”è¾ƒæ„Ÿå…´è¶£çš„å…¬å¸ï¼Œåˆ—å‡ºä¼˜å…ˆçº§ï¼Œç”±ä½åˆ°é«˜ï¼Œå…ˆæŠ•é€’ä¸€æ‰¹ï¼Œç­‰åˆ°å›å¤åå†æŠ•é€’å¦ä¸€æ‰¹ï¼Œè¿™æ ·ä¸»è¦æ˜¯ä¸ºäº†ç»™è‡ªå·±ä¸€äº›æ—¶é—´ç†Ÿæ‚‰é¢è¯•ï¼Œæ¯•ç«Ÿä¸ç®¡æ€æ ·å‡†å¤‡ï¼Œæ€»ä¼šæœ‰ç–æ¼çš„åœ°æ–¹ï¼Œå…ˆé€šè¿‡é¢è¯•ä¸€æ‰¹å…¬å¸ï¼Œè®©è‡ªå·±å°½å¿«è¿›å…¥çŠ¶æ€ã€‚</p>
<h3 id="ç®€å†æŠ•é€’æ¸ é“">ç®€å†æŠ•é€’æ¸ é“</h3>
<p>å¯¹äºæ²¡æœ‰å¤§å‚ç»éªŒçš„å¼€å‘è€…æ¥è¯´ï¼Œ<strong>æ‹‰é’©</strong> å¹¶ä¸æ˜¯ä¸€ä¸ªå€¼å¾—å…³æ³¨çš„åœ°æ–¹ï¼ŒåŸºæœ¬æŠ•é€’åäº†æ— éŸ³è®¯æˆ–è€…å‡ å¤©åæ ‡è®°ä¸ºä¸åˆé€‚ã€‚</p>
<p>è®ºå›æ°´å‹çš„å†…æ¨ï¼ŒV2EXé‡Œä¼ä¸šHRçš„æ‹›è˜è´´ï¼ŒBOSSç›´è˜éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ä½œä¸ºå‚è€ƒï¼Œç»“åˆè¿™æ±‚èŒæœŸé—´çš„é¢è¯•é‚€è¯·,å¤§è‡´çš„æ¯”ä¾‹æ˜¯ 2ï¼š2ï¼š6ã€‚</p>
<h3 id="å…³äºç®€å†å†…å®¹">å…³äºç®€å†å†…å®¹</h3>
<p>å…³äºç®€å†ä¸­çš„å†…å®¹ï¼Œæˆ‘çš„å»ºè®®æ˜¯æŠŠè‡ªå·±èƒ½ show çš„ä¸œè¥¿å†™å‡ºæ¥ï¼Œå› ä¸ºæ— è®ºå…¬å¸æ˜¯å¦æœ‰ iOS å¼€å‘è€…ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œç¬¬ä¸€å…³éƒ½æ˜¯ HRï¼Œçœ‹ä¼¼ä¸“ä¸šçš„æœ¯è¯­ä¼šå¾ˆå¤§å‡ ç‡å½±å“ HR çš„åˆ¤æ–­ï¼Œæ¯•ç«Ÿ  â€iOS ç¨‹åºå‘˜çš„ç®€å†æ˜¯æœ€å¤šçš„â€œ ğŸ˜‚ã€‚<br>
å½“ç„¶ï¼Œå¦‚æœä½ èƒ½å°†ç®€å†ç›´æ¥é€’äº¤åˆ°ç”¨äººéƒ¨é—¨ä¸»ç®¡æ‰‹ä¸­ï¼ˆåŒ…æ‹¬é‚®ç®±ï¼Œå¾®ä¿¡ç­‰ç­‰ï¼‰é‚£å°±å†å¥½ä¸è¿‡äº†ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸ºäº†ç§€è€Œç§€ï¼Œå•çº¯ä¸ºäº†ç§€è€Œä¸é¡¾è‡ªå·±æ°´å¹³çš„ä¹±å†™ï¼Œæˆ‘åªèƒ½è¯´é™ˆç‹¬ç§€ï¼Œä½ åä¸‹ã€‚ã€‚ã€‚</p>
<p>ä»»ä½•å…³äºæ‹›è˜æ€»ç»“çš„å¸–å­ä¸­ï¼Œâ€ç†Ÿæ‚‰ç®€å†ä¸­çš„æŠ€æœ¯ç‚¹â€œ æ°¸è¿œéƒ½æ˜¯æœ€é‡è¦çš„ç‚¹ï¼Œä½ æƒ³ï¼Œæ€»ä¸èƒ½è¢«è‡ªå·±ç®€å†ä¸­çš„çŸ¥è¯†ç‚¹éš¾å€’å§ï¼Œ æƒ³æƒ³é‚£å°´å°¬çš„æ²‰é»˜ã€‚ã€‚ã€‚</p>
<p>åªè¦ä½ é¢è¯•çš„ä¸æ˜¯å®ä¹ ç”Ÿæˆ–è€…åˆçº§å·¥ç¨‹å¸ˆï¼Œ é‚£ä¹ˆä½ æœ€å¥½è€ƒè™‘ä¸€ä¸‹è‡ªå·±çš„æ“…é•¿æ–¹å‘ï¼Œæ¯”å¦‚ UIç²¾é€šï¼Œæ¶æ„ç²¾é€šã€‚å› ä¸ºå¼€å‘è€…ä¸å¯èƒ½åªæ²‰æµ¸äºä¸šåŠ¡ï¼Œä½ å¾—æœ‰ä¸€æ–¹é¢çš„ä¸“é•¿ï¼Œè¿™æ˜¯å’Œå…¶ä»–ç«äº‰è€…æ‹‰å¼€å·®è·çš„åœ°æ–¹ï¼Œå¾ˆä¸å¹¸ï¼Œæˆ‘åœ¨æœ¬æ¬¡çš„æ±‚èŒä¸­ï¼Œå› ä¸ºè¿™ä¸ªåŸå› é”™å¤±äº†ä¸¤ä¸ªè¿˜ç®—ä¸é”™çš„å·¥ä½œæœºä¼šã€‚</p>
<h3 id="å…³äºé¢è¯•è¿‡ç¨‹">å…³äºé¢è¯•è¿‡ç¨‹</h3>
<p>ä¸€å¤©é¢è¯• 1-2 å®¶å…¬å¸æ˜¯æ¯”è¾ƒåˆç†çš„å®‰æ’ï¼Œä¸å»ºè®®è¶…è¿‡2å®¶ã€‚ç»å†æœ‰é™ï¼Œä¸€å®¶é è°±çš„å…¬å¸ï¼ŒåŸºæœ¬é¢è¯•æµç¨‹éƒ½åœ¨2ä¸ªå°æ—¶å·¦å³ï¼Œæ—©æ™¨ä¸€å®¶ï¼Œé¢è¯•å®Œï¼Œåƒä¸ªåˆé¥­ä¼‘æ¯ä¸€ä¼šï¼Œåˆ°å¦ä¸€å®¶ï¼Œè¿™æ ·æ—¶é—´è¿˜ç®—æ˜¯æ¯”è¾ƒå……è£•ï¼Œè‡ªå·±ä¹Ÿæœ‰ä¸ªç¼“å†²æ—¶é—´ï¼Œè‹¥ä¸€å¤©éƒ½åœ¨èµ¶ç€é¢è¯•ï¼Œé‚£è‡ªå·±çš„çŠ¶æ€åˆè¿˜æœ‰å‡ åˆ†å‘¢ï¼Ÿ</p>
<p>æ­£å¸¸é¢è¯•ç¯èŠ‚ä¸€èˆ¬æ˜¯ ç¬”è¯•-å›¢é˜Ÿä¸»ç¨‹é¢-æŠ€æœ¯ä¸»ç®¡é¢-HRé¢ï¼Œ å®Œæ•´æ˜¯è¿™æ ·ï¼Œä½†æ˜¯æ ¹æ®æ¯ä¸ªå…¬å¸ä¸åŒçš„æƒ…å†µä¼šæœ‰æ‰€ç­›å‡ï¼Œä¸è¿‡ <strong>æŠ€æœ¯ä¸»ç®¡</strong> å’Œ <strong>HR</strong> æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p>å¦‚æœé¢è¯•ç¯èŠ‚å®Œæ•´ï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªç¯èŠ‚æ˜¯å¿…é¡»é‡è§†çš„ã€‚</p>
<ul>
<li>
<p>å›¢é˜Ÿä¸»ç¨‹é¢è¯•<br>
åœ¨è¿™ä¸€é¢ä¸­ï¼Œä½ ç›´æ¥é¢å¯¹çš„å°±æ˜¯ä»Šåçš„åŒäº‹ï¼ˆå½“ç„¶å‰ææ˜¯é€šè¿‡é¢è¯•ï¼‰ï¼Œè¿™ç±»äººæœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹-ä¸å¸Œæœ›æ‹›ä¸€ä¸ªæ¯”å¹³å‡æ°´å‡†å·®çš„ã€‚å°½é‡å‡å°‘å›¢é˜Ÿçš„åŸ¹è®­æˆæœ¬ã€‚éƒ½å¸Œæœ›ä½ æ˜¯ä¸€ä¸ªå¯ä»¥å¿«é€Ÿç†è§£é¡¹ç›®ï¼Œå¿«é€ŸåŠ å…¥å¼€å‘æµç¨‹çš„äººã€‚<br>
æ‰€ä»¥ï¼Œä½ å¿…é¡»å¯¹ä»–æåˆ°çš„é—®é¢˜åšåˆ° 90% çš„å¯¹ç­”å¦‚æµï¼Œè¦ä¸ç„¶ä½ å¯èƒ½è¿›ä¸äº†ä¸‹ä¸€è½®ï¼›</p>
</li>
<li>
<p>HRé¢<br>
åœ¨HRé¢ä¸­ï¼Œå…¶å®æ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œå¦‚æœä½ è¶³å¤Ÿä¼˜ç§€ï¼Œé‚£ä¹ˆä¸ç”¨æ‹…å¿ƒï¼Œå¦‚æœä½ åªæ˜¯åœ¨å¹³å‡æ°´å‡†ä¹‹ä¸Šï¼Œé‚£ä¹ˆä½ å¯èƒ½å¾—ç»™ HR ä¸€ä¸ª <strong>ç¨³å®š</strong> çš„å°è±¡ï¼Œ æ‰€è°“ <strong>ç¨³å®š</strong> å…¶å®å°±æ˜¯ä¸è¦é¢‘ç¹è·³æ§½ï¼Œä¸€èˆ¬ä¸¤å¹´ä¸€æ¬¡æ˜¯åœ¨æ¥å—èŒƒå›´å†…ã€‚</p>
<p>æœ€åï¼Œåœ¨æ¯æ¬¡é¢è¯•ç»“æŸåï¼Œä¸€å®šè¦ä¸»åŠ¨è¯¢é—®é¢è¯•å®˜ï¼Œæœ¬æ¬¡é¢è¯•ä¸­ï¼Œä»–è§‰å¾—ä½ æ¯”è¾ƒä¸è¶³çš„åœ°æ–¹ï¼Œè¿™äº›èƒ½å¸®åŠ©ä½ åœ¨åé¢çš„é¢è¯•ä¸­ï¼Œè¡¨ç°çš„æ›´å¥½ã€‚</p>
</li>
</ul>
<h3 id="å…³äºæœ€è¿‘çš„é¢è¯•é¢˜">å…³äºæœ€è¿‘çš„é¢è¯•é¢˜</h3>
<p>è¿™åŠä¸ªæœˆçš„é¢è¯•è¿‡ç¨‹ä¸­ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸‹é¢çš„é—®é¢˜ï¼š</p>
<ul>
<li>å„å®¶ç»„ä»¶åŒ–æ–¹æ¡ˆçš„ä¼˜åŠ£ä¸åŒï¼›</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼›</li>
<li>runtimeç›¸å…³åŸç†ï¼›</li>
<li>weakçš„å®ç°åŸç†ï¼›</li>
<li>å±æ€§å…³é”®å­—ä¿®é¥°ï¼›</li>
<li>é¡¹ç›®ä¸­å…³äºç½‘ç»œå±‚çš„ä¼˜åŒ–ï¼›</li>
<li>Runloopç›¸å…³ï¼›</li>
<li>å¤šçº¿ç¨‹å„ç§æ–¹æ¡ˆå¯¹æ¯”ï¼›</li>
<li>ç¬¬ä¸‰æ–¹åº“åŸç†ï¼›</li>
<li>å›¾ç‰‡è§£ç æ˜¯å¹²ä»€ä¹ˆï¼Ÿ</li>
<li>iOSä¸­äº‹ä»¶å¤„ç†æµç¨‹ï¼›</li>
<li>åˆ†ç±»æœ¬è´¨ï¼›</li>
<li>blockç›¸å…³ï¼›</li>
<li>é”ç›¸å…³ï¼›</li>
<li>kvo&amp;kvcï¼›</li>
</ul>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>æ‰¾å·¥ä½œçœŸçš„å¾ˆç´¯ï¼Œå°¤å…¶æ˜¯åœ¨5æœˆã€‚ã€‚ã€‚ã€‚<br>
å…³äºçŸ¥è¯†ç§¯ç´¯ï¼Œä¸€å®šè¦æ³¨æ„å¹³æ—¶å®¹æ˜“å¿½ç•¥çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯´ ä¸ºä»€ä¹ˆ <strong>SDWebImage</strong> ä¸­ä¸‹è½½å›¾ç‰‡å®Œæˆåéœ€è¦å°†å…¶è§£ç ï¼Ÿ<br>
åœ¨å¯ä»¥å¿«é€Ÿé«˜æ•ˆå®Œæˆæ—¥å¸¸ä¸šåŠ¡åï¼Œä¸€å®šè¦é€‰æ‹©ä¸€ä¸ªæ–¹å‘ï¼Œè¦æœ‰æ‰€ç²¾é€šã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç®€å•çš„ JS ä¸ åŸç”Ÿäº¤äº’å®ç°ä¸Šä¼ å›¾ç‰‡çš„éœ€æ±‚]]></title>
        <id>https://blog.wutao.xyz/post/jian-dan-de-js-yu-yuan-sheng-jiao-hu-shi-xian-shang-chuan-tu-pian-de-xu-qiu/</id>
        <link href="https://blog.wutao.xyz/post/jian-dan-de-js-yu-yuan-sheng-jiao-hu-shi-xian-shang-chuan-tu-pian-de-xu-qiu/">
        </link>
        <updated>2018-04-08T06:58:47.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="å‰æ–‡">å‰æ–‡</h1>
<p>è¿‘æœŸç”±äºå…¬å¸ä¸šåŠ¡å‘å±•çš„éœ€æ±‚ï¼Œä¸ªäººä» iOSå¼€å‘ è½¬ä¸º åŠiOS åŠå‰ç«¯ğŸ˜‚ã€‚<br>
è‡ªå­¦çš„åå¤„åœ¨äºï¼Œæœ‰å¾ˆå¤šå‘æ˜¯è¦è‡ªå·±æ‘”è¿›å»ï¼Œå†çˆ¬å‡ºæ¥ã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<h1 id="å‰æ–‡">å‰æ–‡</h1>
<p>è¿‘æœŸç”±äºå…¬å¸ä¸šåŠ¡å‘å±•çš„éœ€æ±‚ï¼Œä¸ªäººä» iOSå¼€å‘ è½¬ä¸º åŠiOS åŠå‰ç«¯ğŸ˜‚ã€‚<br>
è‡ªå­¦çš„åå¤„åœ¨äºï¼Œæœ‰å¾ˆå¤šå‘æ˜¯è¦è‡ªå·±æ‘”è¿›å»ï¼Œå†çˆ¬å‡ºæ¥ã€‚</p>
<!-- more --> 
<h1 id="éœ€æ±‚">éœ€æ±‚</h1>
<p>å°†ä¸€ä¸ªæŠ¥ä¿®ç•Œé¢ï¼ˆç±»ä¼¼äºåé¦ˆï¼‰æ”¹ç‰ˆï¼Œå¹¶å°†æ–°ç‰ˆç•Œé¢çš„å®ç°ç”±åŸç”Ÿè¿ç§»åˆ°H5ã€‚å¦‚ä¸‹å›¾<br>
<img src="https://ws2.sinaimg.cn/large/006tKfTcgy1fpkdfswwxdj30po19gwjb.jpg" alt="img" loading="lazy"></p>
<p>ç°åœ¨çš„éœ€æ±‚æ˜¯ï¼Œç‚¹å‡»åŠ å·å›¾ç‰‡ï¼š</p>
<ul>
<li>è°ƒç”¨ç³»ç»Ÿæ‹ç…§æˆ–è€…ç›¸å†Œï¼Œç„¶åå°†å›¾ç‰‡äº¤ç»™H5æ˜¾ç¤ºï¼›</li>
<li>å¹¶åœ¨H5æ¥æ”¶åˆ°æ—¶ï¼Œè¿›è¡Œé˜¿é‡Œäº‘ <code>OSS</code> ç›´ä¼ ï¼›</li>
</ul>
<h1 id="å®ç°">å®ç°</h1>
<h3 id="1-è°ƒç”¨ç³»ç»Ÿæ‹ç…§æˆ–è€…ç›¸å†Œç„¶åå°†å›¾ç‰‡äº¤ç»™h5æ˜¾ç¤º">1ã€è°ƒç”¨ç³»ç»Ÿæ‹ç…§æˆ–è€…ç›¸å†Œï¼Œç„¶åå°†å›¾ç‰‡äº¤ç»™H5æ˜¾ç¤º</h3>
<p>å·²çŸ¥çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>&lt;input&gt;</code>æ ‡ç­¾ï¼Œä½¿ç”¨H5ç›´æ¥è°ƒç”¨ï¼ˆåœ¨iOSä¸Šå¯ä»¥è°ƒç”¨ï¼Œä½†åœ¨Androidä¸Šæ— æ³•è°ƒç”¨ï¼ŒPassï¼‰</li>
<li>ä½¿ç”¨ <code>JSBridge</code> è¿›è¡Œ js ä¸åŸç”Ÿäº¤äº’ã€‚</li>
</ol>
<p>ç°åœ¨çš„é—®é¢˜æ˜¯é€‰æ‹©ä¸€ä¸ªå…¼å®¹ä¸‰ç«¯çš„JSBridgeåº“ï¼ˆè™½ç„¶åŸç”Ÿéƒ½æœ‰æ–¹æ³•è¿›è¡Œäº¤äº’ï¼Œä½¿ç”¨å°è£…å¥½çš„ï¼Œæ›´ç¬¦åˆå®é™…ï¼‰ã€‚</p>
<p>æ°å¥½å‰æ®µæ—¶é—´åœ¨æ˜é‡‘çœ‹åˆ° <a href="https://github.com/wendux/DSBridge-IOS/blob/master/readme-chs.md">DSBridge</a>ï¼Œå­¦ä¹ äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥è¿™æ¬¡å°±ç›´æ¥æ‹¿è¿‡æ¥ç”¨äº†ã€‚</p>
<p>DSBridge çš„ä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡»ğŸ‘†çš„é“¾æ¥æŸ¥çœ‹ã€‚</p>
<p>å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-Objective-c">#JSAPI

// js è°ƒç”¨åŸç”Ÿ
- (NSString *)chooseImageFromMobile:(NSString *) msg {
  // ä½¿ç”¨blockå›è°ƒï¼Œé€šçŸ¥Controller
  if (self.chooseImage) {
    self.chooseImage();
  }
  return [msg stringByAppendingString:@&quot;[ syn call]&quot;];
}

- (NSString *)showRepairPendding:(NSString *) msg {
  [SVProgressHUD showWithStatus:@&quot;æ­£åœ¨å¤„ç†ä¸­...&quot;];
  return [msg stringByAppendingString:@&quot;[ syn call]&quot;];
}

// æœåŠ¡ç«¯è¿”å›è¯·æ±‚é”™è¯¯æ—¶ï¼Œ jsè°ƒç”¨åŸç”Ÿ
- (NSString *)showRepairError:(NSString *) msg {
  [SVProgressHUD showImage:nil status:msg];
  return [msg stringByAppendingString:@&quot;[ syn call]&quot;];
}

// æœåŠ¡ç«¯è¿”å›æŠ¥ä¿®æˆåŠŸæ—¶ï¼Œ jsè°ƒç”¨åŸç”Ÿ
- (NSString *)showRepairSuccess:(NSString *) msg {
  [SVProgressHUD dismiss];
  return [msg stringByAppendingString:@&quot;[ syn call]&quot;];
}
</code></pre>
<pre><code># ViewController


- (void)viewDidLoad {
    [super viewDidLoad];
  @weakify(self)
  self.repairApi.chooseImage = ^(){
    @strongify(self)
    [self changeHeader];
  };
    
}


- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    @weakify(self);
  [picker dismissViewControllerAnimated:YES completion:^{
    @strongify(self)
    UIImage *icon = info[UIImagePickerControllerOriginalImage];
    NSData *imgData = UIImageJPEGRepresentation(icon,0.1);
    NSString *data = [imgData base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];
    // å°†dataæ‹¼æ¥æˆ img src èƒ½è¯†åˆ«çš„æ ‡å¿—ã€‚
    NSString *source = [NSString stringWithFormat:@&quot;data:image/png;base64,%@&quot;, data];
    [self.webView callHandler:@&quot;addPicture&quot; arguments:@[source] completionHandler:^(id  _Nullable value) {
      NSLog(@&quot;%@&quot;,value);
    }];
  }];
}

</code></pre>
<p>æ¥ä¸‹æ¥åªè¦åœ¨ js ä¸­è°ƒç”¨ OC ä¸­çš„æ–¹æ³•å°±å¯ä»¥äº†</p>
<pre><code class="language-JavaScript">
// æ³¨å†Œ	addPicture æ–¹æ³•ï¼Œæ¥å—ä» OC ä¼ è¿‡æ¥çš„å‚æ•°
dsBridge.register(&quot;addPicture&quot;, function(data) {
		// TODO
		// ä»æœåŠ¡ç«¯è·å–ç›´ä¼  accessid å’Œ hosturl ç­‰å‚æ•°
	  return data;
});
        
</code></pre>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>è¿™ä¸ªéœ€æ±‚çš„æ ¸å¿ƒå°±æ˜¯ JS ä¸ åŸç”Ÿä¹‹é—´çš„äº¤äº’ï¼Œåªè¦æ‰¾å¯¹ä¸‹æ‰‹æ–¹å‘ï¼Œé‚£ä¹ˆå‰©ä¸‹å°±æ˜¯ç ä»£ç äº†ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ï¼ˆè¯‘ï¼‰å¯¹äº Objective-C æ¥è¯´ Unit Testing çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>
        <id>https://blog.wutao.xyz/post/yi-dui-yu-objective-c-lai-shuo-unit-testing-de-jie-zhi-shi-shi-me/</id>
        <link href="https://blog.wutao.xyz/post/yi-dui-yu-objective-c-lai-shuo-unit-testing-de-jie-zhi-shi-shi-me/">
        </link>
        <updated>2017-09-26T02:13:55.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€å¤§çš„é—®é¢˜æ˜¯ â€œå¯¹äº Objective-C æ¥è¯´ Unit Testing çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿâ€</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€å¤§çš„é—®é¢˜æ˜¯ â€œå¯¹äº Objective-C æ¥è¯´ Unit Testing çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿâ€</p>
<!-- more -->
<p>æœåŠ¡ç«¯çš„å°ä¼™ä¼´ä¼š Mock æ•´ä¸ªæ•°æ®åº“ï¼Œä»…ä»…ä¸ºäº†æµ‹è¯•ä¸€æ¡ç±»ä¼¼äº â€œHello Worldâ€ çš„ SQL è¯­å¥ã€‚<br>
åœ¨ iOS ä¸­ï¼Œä½ éœ€è¦å¦‚æ­¤çš„ä»”ç»†å—ï¼Ÿè¿™å¤§æ¦‚æ˜¯ä¸éœ€è¦çš„ã€‚<br>
ä½ éœ€è¦å°†å•å…ƒæµ‹è¯•è¦†ç›–åˆ° iOS é¡¹ç›®ä¸­çš„æ¯ä¸€è¡Œä»£ç å—ï¼Ÿè¿™æ¯«æ— ç–‘é—®æ˜¯ä¸éœ€è¦çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œä½ åº”è¯¥æ€æ ·å†³å®šä½ çš„æµ‹è¯•è®¡åˆ’ã€‚</p>
<p>å•å…ƒæµ‹è¯•æœ‰ä¸¤ä¸ªç›®çš„ï¼š</p>
<ul>
<li>é¦–å…ˆä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼ˆä»æˆ‘çš„è§‚ç‚¹æ¥è¯´ï¼‰å®ƒå¯ä»¥å¸®ä½ ä¿æŒç±»çš„å°è€Œç²¾ã€‚</li>
<li>å…¶æ¬¡ï¼Œå®ƒå¯ä»¥ä¸ºä½ æä¾›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li>
</ul>
<p>ä¸ºä»€ä¹ˆæˆ‘è¿™ä¹ˆè¯´ï¼Ÿ<br>
å¦‚æœä½ å°è¯•ç¼–å†™ä¸€ä¸ªç±»å»é€šè¿‡æŸä¸ª API æ¥è·å–æ•°æ®ï¼Œä½ ä¼šä»å¯¹å®ƒè¡Œä¸ºçš„ä¸€äº›çŒœæµ‹æ¥å¼€å§‹å¼€å‘ã€‚<br>
ä½¿ç”¨è¿™ä¸ªç±»ï¼Œä¼šä¾èµ–è¿™äº›å‡è®¾ã€‚å‡å¦‚ä½ è¿‡äº†å‡ ä¸ªæœˆå¿˜è®°è¿™äº›å‡è®¾æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆå¦‚æœä½ æ›´æ”¹äº†å…³äºç½‘ç»œè¯·æ±‚çš„ä»£ç ï¼Œä½ å¾ˆæœ‰å¯èƒ½åœ¨æŸä¸ªåœ°æ–¹æ”¹å˜äº†ä¹‹å‰çš„é€»è¾‘ã€‚è¿™äº›å¯èƒ½å‘ç”Ÿåœ¨ä½ æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ã€‚</p>
<p>ä½ åº”è¯¥é€šè¿‡æ‰‹åŠ¨è¿˜æ˜¯è‡ªåŠ¨å»æµ‹è¯•ä½ çš„ Appï¼Ÿå®ƒå¹¶ä¸æ„å‘³ç€ä½ éœ€è¦å°†å•å…ƒæµ‹è¯•è¦†ç›–æ•´ä¸ª APPï¼Œä½†æ˜¯åœ¨å‘ç‰ˆæœ¬ä¹‹å‰ï¼Œä½ åº”è¯¥æµ‹è¯•ä¸€äº›å…³é”®ä¹‹å¤„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦é€šè¿‡æ‰‹åŠ¨åšè¿™äº›å‘¢è€Œä¸é€‰æ‹©è‡ªåŠ¨æµ‹è¯•å‘¢ï¼Ÿ</p>
<p><em>Matt Gemmell</em> æ›¾ç»å†™è¿‡ â€œthou shalt suffer no bugs to shipâ€ï¼ˆå‘ç‰ˆæ—¶å¿…é¡»ä¸è¦æœ‰ä»»ä½• Bugï¼‰ï¼Œæˆ‘è®¤ä¸ºä»–è¯´çš„å¾ˆå¯¹ï¼Œå¹¶ä¸”æˆ‘ä¹Ÿæ˜¯è¿™æ ·åšçš„ ã€‚ä»–ä¹Ÿè¯´åˆ°ï¼Œæ— è®ºä½ ç”¨å“ªç§æœºåˆ¶å»ä¿è¯åœ¨å‘ç‰ˆæ—¶æ²¡æœ‰ bugï¼Œä½ åªæ˜¯éœ€è¦æœ‰ä¸€ç§æ–¹æ³•ã€‚Unit Testsï¼Œ UI Acceptance Tests, æˆ–è€…æ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡æ‰‹åŠ¨è§£å†³ï¼ˆä½†æ˜¯è¿™å°†ä¼šèŠ±è´¹å¤§é‡æ—¶é—´ï¼‰ã€‚ Unit Test æˆ–è€… UAT æ›´åŠ è¿…é€Ÿã€‚</p>
<p>ä¸Šé¢è¯´çš„æ‰€æœ‰éƒ½æ˜¯ â€œå¯¹äº Objective-C æ¥è¯´ Unit Testing çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿâ€ è¿™ä¸ªè¯é¢˜çš„å¼€åœºç™½ã€‚<br>
è®©æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªå¥½çš„æ¶æ„çš„ iOS appã€‚å®ƒè¢«åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š Modelï¼ŒViewï¼ŒControllerã€‚</p>
<p><img src="//upload-images.jianshu.io/upload_images/664484-1b495266b14976c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" loading="lazy"><br>
426D1328D1E744999A88979FAF12C2C2.png</p>
<p>ï¿¼<br>
æˆ‘æœ‰è¯´ three partsï¼Ÿ æˆ‘çš„æ„æ€æ˜¯ three-ishï¼ˆæš‚æ—¶æ²¡ææ¸…æ¥šä»€ä¹ˆæ„æ€ğŸ¤£ï¼‰ã€‚ App éœ€è¦ API çš„è°ƒç”¨ï¼Œä½ ä¹Ÿéœ€è¦å†™ç½‘ç»œè¯·æ±‚çš„ä»£ç ã€‚æœ‰çš„æ—¶å€™ï¼Œä»£ç ä¼šä» Model ä¸­åˆ†ç¦»ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šåŒ…å«åœ¨ Model ä¸­ï¼Œåœ¨å¯é¿å…çš„æƒ…å†µä¸‹å®ƒåº”è¯¥ä»ä¸åŒ…å«åœ¨ View ä¸­ï¼Œæˆ–è€…åŒ…å«åœ¨ Controller ä¸­ï¼ˆè¿™åº”è¯¥æ°¸è¿œæ˜¯å¯é¿å…çš„ï¼‰ã€‚</p>
<p>View å’Œ Controller è‡ªæ£€çš„ç›¸äº’ä½œç”¨ä¸åˆ©äºå•å…ƒæµ‹è¯•â€” è¿™äº›åœ°æ–¹ UAT å¯ä»¥å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ è¿™ç¯‡æ–‡ç« å¹¶ä¸ä¼šæ¶‰åŠè¿™äº›ã€‚</p>
<p>æ©™è‰²çš„åŒºåŸŸæ˜¯å•å…ƒæµ‹è¯•æœ€æœ‰ä½œç”¨çš„åœ°æ–¹ã€‚Model å’Œç½‘ç»œè¯·æ±‚ä»£ç ä¸­ã€‚</p>
<p>ä½ å¯ä»¥å¾ˆå®¹æ˜“çš„æµ‹è¯•ç½‘ç»œè¯·æ±‚ä»£ç ï¼Œå»éªŒè¯ä½ ç¬¬ä¸€æ¬¡å†™å®ƒçš„æ—¶å€™å…³äºå®ƒçš„å‡è®¾ã€‚å¦‚æœä½ çš„ Model æ¯”è¾ƒç²¾ç‚¼ï¼Œä½ å¯èƒ½ä¸ä¼šå»æµ‹è¯•ã€‚ç„¶è€Œï¼Œè¿™äº› models å¯èƒ½åœ¨ä»»ä½•åœ°æ–¹è¢«åˆ›å»ºå’Œä¿®æ”¹ï¼Œæ‰€ä»¥ï¼Œä½ åº”è¯¥ç¡®ä¿æµ‹è¯•è¿™äº›ä»£ç ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼šå•å…ƒæµ‹è¯• Models å’Œç½‘ç»œè¯·æ±‚ä»£ç ã€‚å¦‚æœä½ è§‰å¾—å€¼å¾—ï¼Œé‚£ä¹ˆç”¨ UAT å»æµ‹è¯•å…¶ä»–çš„ã€‚å¯èƒ½æ‰‹åŠ¨æµ‹è¯• Views å’Œ Controllers æ›´åŠ é€‚åˆä½ çš„å·¥ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨æ¯”è¾ƒå°å‹çš„ app ä¸­ã€‚</p>
<p>æœ€åï¼Œæ— è®ºä½ ç”¨å“ªç§æµ‹è¯•ï¼Œè¯·è®°å½•å®ƒï¼Œå¹¶ä¸”ç¼–æˆæ–‡æ¡£ã€‚è¿™æ ·ä½ å°±å¯ä»¥åœ¨å‘ç‰ˆä¹‹å‰æ‰‹åŠ¨æµ‹è¯•å®ƒäº†ã€‚</p>
]]></content>
    </entry>
</feed>